{"version":3,"file":"js/850.04a10b7e.js","mappings":"+YAEA,MAAMA,EAAO,kBAEAC,EAAaC,GACfC,EAAAA,EAAAA,IAAUH,EAAM,CACnBI,OAAQF,IAIHG,EAAcC,GAChBH,EAAAA,EAAAA,KAAWH,EAAK,IAAIM,EAAO,WAIzBC,EAAeD,GACjBH,EAAAA,EAAAA,KAAWH,EAAK,IAAIM,EAAO,YAGzBE,EAAeF,GACjBH,EAAAA,EAAAA,IAAUH,EAAK,IAAIM,GAGjBG,EAAkBH,GACpBH,EAAAA,EAAAA,UAAaH,EAAK,IAAIM,GAGpBI,EAAcC,GAChBR,EAAAA,EAAAA,KAAWH,EAAMW,GAGfC,EAAiBC,GACnBV,EAAAA,EAAAA,KAAWH,EAAM,IAAMa,EAAI,mBAGzBC,EAAiBR,GACnBH,EAAAA,EAAAA,KAAWH,EAAM,IAAMM,EAAQ,eAG7BS,EAAsBT,GACxBH,EAAAA,EAAAA,UAAaH,EAAM,IAAMM,EAAQ,eAG/BU,EAAiB,CAACV,EAAQW,IAC5Bd,EAAAA,EAAAA,KAAWH,EAAM,IAAMM,EAAQ,YAAaW,GAG1CC,EAAiB,CAACZ,EAAQW,IAC5Bd,EAAAA,EAAAA,KAAWH,EAAM,IAAMM,EAAQ,YAAaW,I,qHCImE,Q,WACL,Q,GAoCzGE,EAAAA,EAAAA,GAAM,mB,GACNA,EAAAA,EAAAA,GAAa,UAAT,QAAI,G,WAuCuE,M,WAChB,M,6nBAjIvEC,EAAAA,EAAAA,IAsIeC,EAAA,M,kBArIX,IAWY,EAXZC,EAAAA,EAAAA,IAWYC,EAAA,M,kBAVR,IASS,EATTD,EAAAA,EAAAA,IASSE,EAAA,CATAC,OAAQ,IAAE,C,kBACf,IAIS,EAJTH,EAAAA,EAAAA,IAISI,EAAA,CAJAC,KAAM,GAAC,C,kBACZ,IAEa,EAFbL,EAAAA,EAAAA,IAEaM,EAAA,CAFDC,QAAQ,QAAQC,UAAU,OAAtC,C,kBACI,IAA+F,EAA/FR,EAAAA,EAAAA,IAA+FS,EAAA,CAApFC,KAAK,UAAWC,KAAK,OAAOC,MAAA,eAAqBC,QAAK,eAAEC,EAAAA,qB,gBAG3Ed,EAAAA,EAAAA,IAESI,EAAA,CAFAC,KAAM,GAAC,C,kBACZ,IAAkJ,EAAlJL,EAAAA,EAAAA,IAAkJe,EAAA,CAAvIC,SAAQF,EAAAA,Q,WAAkBG,EAAAA,cAAcC,kC,qCAAdD,EAAAA,cAAcC,kCAAiCC,GAAEC,MAAM,MAAMC,YAAY,cAAc,cAAY,UAAxI,qC,yBAIZrB,EAAAA,EAAAA,IA4CUsB,EAAA,M,kBA3CN,IAyCW,EAzCXtB,EAAAA,EAAAA,IAyCWuB,EAAA,CAzCAC,KAAMP,EAAAA,aAAaV,QAASkB,OAAA,GAAOC,MAAM,OAApD,C,kBACI,IAAoE,EAApE1B,EAAAA,EAAAA,IAAoE2B,EAAA,CAAnDC,KAAK,KAAKR,MAAM,KAAK,YAAU,KAAKS,MAAM,UAC3D7B,EAAAA,EAAAA,IAAqF2B,EAAA,CAApEC,KAAK,WAAWR,MAAM,KAAK,YAAU,MAAMS,MAAM,OAAOC,UAAA,MACzE9B,EAAAA,EAAAA,IAAyE2B,EAAA,CAAxDC,KAAK,WAAWR,MAAM,MAAM,YAAU,MAAMU,UAAA,MAC7D9B,EAAAA,EAAAA,IAMkB2B,EAAA,CANDP,MAAM,KAAKM,MAAM,MAAOI,UAAA,IAAzC,C,kBACsBC,GAAK,EACnB/B,EAAAA,EAAAA,IAEUgC,EAAA,CAFAC,WAAW,EAAOpB,QAAK,GAAEC,EAAAA,gBAAgBiB,EAAMG,KAAMxB,KAAK,WAApE,C,kBACI,IAAqB,mBAAlBqB,EAAMG,IAAIC,OAAK,M,KADtB,qB,OAKRnC,EAAAA,EAAAA,IAgBkB2B,EAAA,CAhBDP,MAAM,OAAOU,UAAA,IAA9B,CACeM,QAAM,SACb,IAQQ,EARRpC,EAAAA,EAAAA,IAQQqC,EAAA,C,WARYpB,EAAAA,cAAcqB,Q,qCAAdrB,EAAAA,cAAcqB,QAAOnB,GAAEE,YAAY,OAAQL,SAAQF,EAAAA,QAASyB,UAAA,IAAhF,C,kBAEI,IAA6B,cADjCC,EAAAA,EAAAA,IAMYC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALO,EAAC,GAAM,IAAfC,IADX3C,EAAAA,EAAAA,IAMY4C,EAAA,CAJPC,IAAKF,EACLvB,MAAOuB,EAAI,UACXG,MAAOH,GAJZ,oC,KADA,gC,kBAUcZ,GAAK,EACnB/B,EAAAA,EAAAA,IACY+C,EAAA,C,WADQhB,EAAMG,IAAII,Q,yBAAVP,EAAMG,IAAII,QAAOnB,EAAG6B,QAAS/B,EAAAA,QAAQgC,kBAAqBjC,SAAM,GAAEF,EAAAA,gBAAgBiB,EAAMG,IAAI3C,GAAIwC,EAAMG,IAAII,SAAWY,SAAUpC,EAAAA,oBAAoBiB,EAAMG,MAA7K,gF,OAIRlC,EAAAA,EAAAA,IAKkB2B,EAAA,CALDP,MAAM,SAAO,C,kBACRW,GAAK,EACnB/B,EAAAA,EAAAA,IACY+C,EAAA,C,WADQhB,EAAMG,IAAIiB,W,yBAAVpB,EAAMG,IAAIiB,WAAUhC,EAAG6B,QAAS/B,EAAAA,QAAQmC,gBAAkBpC,SAAM,GAAEF,EAAAA,iBAAiBiB,EAAMG,KAAOgB,SAAUpC,EAAAA,oBAAoBiB,EAAMG,MAAxJ,gF,OAIRlC,EAAAA,EAAAA,IAA+D2B,EAAA,CAA9CC,KAAK,WAAWR,MAAM,OAAO,YAAU,SACxDpB,EAAAA,EAAAA,IAKkB2B,EAAA,CALDP,MAAM,KAAK,YAAU,MAAMU,UAAA,IAA5C,C,kBACsBC,GAAK,EACnB/B,EAAAA,EAAAA,IAAkHS,EAAA,CAAvGE,KAAK,UAAUD,KAAK,UAAU2C,KAAK,QAASxC,SAAK,YAAOC,EAAAA,gBAAgBiB,EAAMG,IAAI3C,KAAE,WAA/F,C,kBAAkG,IAAI,M,KAAtG,mBACAS,EAAAA,EAAAA,IAA6GS,EAAA,CAAlGE,KAAK,SAASD,KAAK,SAAS2C,KAAK,QAASxC,SAAK,YAAOC,EAAAA,aAAaiB,EAAMG,IAAI3C,KAAE,WAA1F,C,kBAA6F,IAAI,M,KAAjG,qB,cAtCZ,e,OA4CJS,EAAAA,EAAAA,IAUYsD,EAAA,M,kBATR,IAQgB,EARhBtD,EAAAA,EAAAA,IAQgBuD,EAAA,CARDC,OAAO,2BACrB,uBAAqB,EACrBC,YAAaxC,EAAAA,aAAayC,OAC1B,YAAWzC,EAAAA,cAAcoC,KACzB,aAAY,CAAC,GAAD,UACZ,aAAYpC,EAAAA,aAAa0C,WACzBC,aAAa9C,EAAAA,iBACb+C,gBAAgB/C,EAAAA,cAPjB,qF,OAYJd,EAAAA,EAAAA,IA8BY8D,EAAA,C,WA7BK7C,EAAAA,uB,qCAAAA,EAAAA,uBAAsBE,GAC/B4C,MAAM,OACNC,UAAU,MACVX,KAAK,OAJb,C,kBAMI,IAUkB,EAVlBrD,EAAAA,EAAAA,IAUkBiE,EAAA,CATNF,MAAM,OACLG,OAAQ,EACTzC,OAAA,IAHZ,C,kBAII,IAA+E,EAA/EzB,EAAAA,EAAAA,IAA+EmE,EAAA,CAAzD/C,MAAM,MAAI,C,kBAAC,IAAuB,mBAApBH,EAAAA,eAAe1B,IAAE,M,OACrDS,EAAAA,EAAAA,IAAqFmE,EAAA,CAA/D/C,MAAM,MAAI,C,kBAAC,IAA6B,mBAA1BH,EAAAA,eAAemD,UAAQ,M,OAC3DpE,EAAAA,EAAAA,IAAsFmE,EAAA,CAAhE/C,MAAM,OAAK,C,kBAAC,IAA6B,mBAA1BH,EAAAA,eAAeoD,UAAQ,M,OAC5DrE,EAAAA,EAAAA,IAA4FmE,EAAA,CAAtE/C,MAAM,KAAMf,KAAM,GAAxC,C,kBAA2C,IAA0B,mBAAvBY,EAAAA,eAAekB,OAAK,M,OAClEnC,EAAAA,EAAAA,IAA4GmE,EAAA,CAAtF/C,MAAM,OAAQf,KAAM,GAA1C,C,kBAA6C,IAAwC,mBAArCY,EAAAA,eAAeqB,QAAO,mB,OACtEtC,EAAAA,EAAAA,IAAiGmE,EAAA,CAA3E/C,MAAM,OAAQf,KAAM,GAA1C,C,kBAA6C,IAA6B,mBAA1BY,EAAAA,eAAeqD,UAAQ,M,eAE3EC,EACAC,GACAxE,EAAAA,EAAAA,IAUWuB,EAAA,CAVAC,KAAMP,EAAAA,eAAewD,MAAOC,OAAA,IAAvC,C,kBACI,IACkB,EADlB1E,EAAAA,EAAAA,IACkB2B,EAAA,CADDP,MAAM,KAAKQ,KAAK,OAAQ+C,UAAW1D,EAAAA,mBAApD,uBAEAjB,EAAAA,EAAAA,IAIkB2B,EAAA,CAJDP,MAAM,QAAM,C,kBACPW,GAAK,CACJA,EAAMG,IAAI0C,UAAAA,EAAAA,EAAAA,OAAzB9E,EAAAA,EAAAA,IAA8JkC,EAAA,C,MAA3HnB,QAAK,GAAEC,EAAAA,YAAYiB,EAAMG,IAAI0C,QAAS7C,EAAMG,IAAI2C,YAAnF,C,kBAA+F,IAAyB,mBAAtB9C,EAAMG,IAAI2C,WAAY,IAAC,IAAA7E,EAAAA,EAAAA,IAA2B8E,EAAA,M,kBAAlB,IAAQ,EAAR9E,EAAAA,EAAAA,IAAQ+E,M,cAA1I,sC,OAGR/E,EAAAA,EAAAA,IAAgE2B,EAAA,CAA/CC,KAAK,UAAUR,MAAM,WACtCpB,EAAAA,EAAAA,IAAkE2B,EAAA,CAAjDC,KAAK,WAAWR,MAAM,c,KAT3C,e,KAnBJ,mBAiCApB,EAAAA,EAAAA,IA6BYgF,EAAA,C,WA7BQ/D,EAAAA,qB,uCAAAA,EAAAA,qBAAoBE,GAAEO,MAAM,MAAMuD,OAAA,GAAO,sBAAiBlB,MAAM,QAApF,C,kBACI,IA0BU,EA1BV/D,EAAAA,EAAAA,IA0BUkF,EAAA,CA1BAC,MAAOlE,EAAAA,SAAU,iBAAe,MAAOmE,MAAOnE,EAAAA,aAAcoE,IAAI,eAA1E,C,kBACI,IAEe,EAFfrF,EAAAA,EAAAA,IAEesF,EAAA,CAFDlE,MAAM,KAAMQ,KAAK,YAA/B,C,kBACI,IAAiD,EAAjD5B,EAAAA,EAAAA,IAAiDe,EAAA,C,WAA9BE,EAAAA,SAASmD,S,qCAATnD,EAAAA,SAASmD,SAAQjD,IAApC,0B,OAEJnB,EAAAA,EAAAA,IAEesF,EAAA,CAFDlE,MAAM,MAAOQ,KAAK,YAAhC,C,kBACI,IAAiD,EAAjD5B,EAAAA,EAAAA,IAAiDe,EAAA,C,WAA9BE,EAAAA,SAASoD,S,qCAATpD,EAAAA,SAASoD,SAAQlD,IAApC,0B,OAEJnB,EAAAA,EAAAA,IAEesF,EAAA,CAFDlE,MAAM,KAAKQ,KAAK,SAA9B,C,kBACI,IAA8C,EAA9C5B,EAAAA,EAAAA,IAA8Ce,EAAA,C,WAA3BE,EAAAA,SAASkB,M,qCAATlB,EAAAA,SAASkB,MAAKhB,IAAjC,0B,OAEJnB,EAAAA,EAAAA,IAOesF,EAAA,CAPDlE,MAAM,KAAKQ,KAAK,YAA9B,C,kBACI,IAKE,EALF5B,EAAAA,EAAAA,IAKEe,EAAA,C,WAJWE,EAAAA,SAASsE,S,qCAATtE,EAAAA,SAASsE,SAAQpE,GAC1BT,KAAK,WACLW,YAAY,QACZ,oBAJJ,0B,OAOJrB,EAAAA,EAAAA,IAGesF,EAAA,CAHDlE,MAAM,QAAM,C,kBACtB,IACY,EADZpB,EAAAA,EAAAA,IACY+C,EAAA,C,WADQ9B,EAAAA,SAASqB,Q,qCAATrB,EAAAA,SAASqB,QAAOnB,IAApC,0B,OAGJnB,EAAAA,EAAAA,IAGesF,EAAA,M,kBAFX,IAAqF,EAArFtF,EAAAA,EAAAA,IAAqFS,EAAA,CAA1EC,KAAK,UAAU8E,MAAA,GAAO3E,QAAK,eAAEC,EAAAA,eAAc,iBAAtD,C,kBAAuE,IAAE,M,OACzEd,EAAAA,EAAAA,IAAqES,EAAA,CAA1D+E,MAAA,GAAO3E,QAAK,iBAAEI,EAAAA,sBAAoB,IAA7C,C,kBAAuD,IAAE,M,uBAxBjE,wB,KADJ,qB,uCAsCR,GACIO,OACI,MAAO,CACHwB,QAAS,CACLI,iBAAiB,EACjBH,mBAAmB,GAEvBwC,SAAU,CACNnD,SAAS,GAEboD,aAAc,CACVtB,SAAU,CAACuB,KAAKC,uBAAuB,WACvCvB,SAAU,CAACsB,KAAKC,uBAAuB,YACvCzD,MAAO,CAACwD,KAAKC,uBAAuB,UAAW,CAAElF,KAAM,QAASmF,QAAS,UAAWC,QAAS,SAC7FP,SAAU,CAACI,KAAKC,uBAAuB,UAAW,CAAEG,IAAK,EAAGC,IAAK,GAAIH,QAAS,oBAAqBC,QAAS,UAEhHG,aAAc,CACV1F,QAAS,IAEb2F,cAAe,CACXhF,kCAAmC,KACnCoB,QAAS,KACT6D,KAAM,EACN9C,KAAM,IAEV+C,eAAgB,GAGhBC,wBAAwB,EACxBC,sBAAsB,EACtBC,kBAAmB,SAASrE,EAAKgC,EAAQsC,GACzC,MAAY,aAARA,EACO,QACQ,eAARA,EACA,KACQ,gBAARA,EACA,KAEAA,KAMnBC,UACId,KAAKe,cAETC,QAAS,CACLD,cACI/H,EAAAA,EAAAA,IAAUgH,KAAKO,eAAeU,MAAKC,IAC1BA,EAAKC,UACNnB,KAAKM,aAAeY,EAAKrF,KACzBmE,KAAKM,aAAavC,OAASmD,EAAKrF,KAAKkC,OAAS,OAI1DkC,uBAAuBC,GACnB,MAAO,CACHkB,UAAU,EACVlB,QAASA,EACTC,QAAS,SAGjBkB,gBAAgBhI,EAAQiI,GAChBA,GACAlI,EAAAA,EAAAA,IAAWC,IAEXC,EAAAA,EAAAA,IAAYD,IAGpBkI,gBAAgBlI,GACZ2G,KAAKwB,SAAS,uBAAwB,KAAM,CACxCC,kBAAmB,KACnBC,iBAAkB,KAClB3G,KAAM,YACPkG,MAAK,MACJtH,EAAAA,EAAAA,IAAcN,GAAQ4H,MAAKC,IAClBA,EAAKC,UACNQ,EAAAA,EAAAA,IAAU,CACNC,WAAW,EACX1B,QAAS,SACTnF,KAAM,UACN8G,SAAU,aAM9BC,aAAazI,GACT2G,KAAKwB,SAAS,yBAA0B,KAAM,CAC1CC,kBAAmB,KACnBC,iBAAkB,KAClB3G,KAAM,YACPkG,MAAK,MACJzH,EAAAA,EAAAA,IAAeH,GAAQ4H,MAAKC,IACnBA,EAAKC,UACNnB,KAAKe,cACLY,EAAAA,EAAAA,IAAU,CACNC,WAAW,EACX1B,QAAS,SACTnF,KAAM,UACN8G,SAAU,cAM9BE,aAAajE,GACLA,GAAgBA,EAAc,GAAMkC,KAAKO,cAAcC,OACvDR,KAAKO,cAAcC,KAAO1C,EAAc,EACxCkC,KAAKe,eAGbiB,iBAAiBC,GACTA,IACAjC,KAAKO,cAAc7C,KAAOuE,EAC1BjC,KAAKe,eAGbmB,UACIlC,KAAKO,cAAcC,KAAO,EAC1BR,KAAKe,cAEToB,gBAAgBC,GACZpC,KAAKU,wBAAyB,GAC9BnH,EAAAA,EAAAA,IAAY6I,EAAKxI,IAAIqH,MAAKC,IAClBA,EAAKC,UACLnB,KAAKS,eAAiBS,EAAKrF,UAIvCwG,iBACIrC,KAAKsC,MAAMC,YAAYC,UAASC,KACxBA,KACAhJ,EAAAA,EAAAA,IAAWuG,KAAKF,UAAUmB,MAAKC,IACtBA,EAAKC,UACNnB,KAAK0C,SAASC,QAAQ,UACtB3C,KAAKW,sBAAuB,EAC5BX,KAAKF,SAAW,CACZnD,SAAS,GAEbqD,KAAKe,kBAGN,MAOnB6B,iBAAiBR,GACb,MAAM/I,EAAS+I,EAAKxI,GAEpB,OADAoG,KAAK3C,QAAQI,iBAAkB,EAC3B2E,EAAK5E,YACE3D,EAAAA,EAAAA,GAAcR,GAAQ4H,MAAKC,IACzBA,EAAKC,SACNnB,KAAK0C,SAASC,QAAQ,aAE1B3C,KAAK3C,QAAQI,iBAAkB,MAG5B3D,EAAAA,EAAAA,IAAmBT,GAAQ4H,MAAKC,IAC9BA,EAAKC,SACNnB,KAAK0C,SAASG,QAAQ,aAE1B7C,KAAK3C,QAAQI,iBAAkB,MAI3CqF,eACI9C,KAAKW,sBAAuB,GAEhCoC,YAAY9D,EAASC,GACdD,GACCe,KAAKgD,QAAQC,KAAK,CAACC,KAAM,WAAWjE,EAASkE,MAAO,CAAEjE,UAAWA,MAGzEkE,oBAAoB7G,GAChB,MAAM8G,EAAYjB,EAAAA,EAAAA,oBAClB,SAAIiB,GAAaA,EAAUzJ,IAAM2C,EAAI3C,O,UC9TjD,MAAM0J,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://databasir/./src/api/User.js","webpack://databasir/./src/views/UserList.vue","webpack://databasir/./src/views/UserList.vue?1332"],"sourcesContent":["import axios from '@/utils/fetch';\r\n\r\nconst base = '/api/v1.0/users'\r\n\r\nexport const listUsers = (pageQuery) => {\r\n    return axios.get(base, {\r\n        params: pageQuery\r\n    })\r\n}\r\n\r\nexport const enableUser = (userId) => {\r\n    return axios.post(base+\"/\"+userId+\"/enable\")\r\n\r\n}\r\n\r\nexport const disableUser = (userId) => {\r\n    return axios.post(base+\"/\"+userId+\"/disable\")\r\n}\r\n\r\nexport const getByUserId = (userId) => {\r\n    return axios.get(base+\"/\"+userId)\r\n}\r\n\r\nexport const deleteByUserId = (userId) => {\r\n    return axios.delete(base+\"/\"+userId)\r\n}\r\n\r\nexport const createUser = (request) => {\r\n    return axios.post(base, request)\r\n}\r\n\r\nexport const renewPassword = (id) => {\r\n    return axios.post(base +'/' + id +'/renew_password')\r\n}\r\n\r\nexport const addSysOwnerTo = (userId) => {\r\n    return axios.post(base +'/' + userId +'/sys_owners')\r\n}\r\n\r\nexport const removeSysOwnerFrom = (userId) => {\r\n    return axios.delete(base +'/' + userId +'/sys_owners')\r\n}\r\n\r\nexport const updatePassword = (userId, body) => {\r\n    return axios.post(base +'/' + userId +'/password', body)\r\n}\r\n\r\nexport const updateNickname = (userId, body) => {\r\n    return axios.post(base +'/' + userId +'/nickname', body)\r\n}","<template>\r\n    <el-container>\r\n        <el-header>\r\n            <el-row :gutter=\"12\">\r\n                <el-col :span=\"2\">\r\n                    <el-tooltip content=\"创建新用户\" placement=\"top\">\r\n                        <el-button type=\"primary\"  icon=\"plus\" style=\"width: 100%\" @click=\"toCreatePage()\"></el-button>\r\n                    </el-tooltip>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <el-input @change='onQuery' v-model=\"userPageQuery.nicknameOrUsernameOrEmailContains\" label=\"用户名\" placeholder=\"昵称、用户名或邮箱搜索\" prefix-icon=\"search\"/>\r\n                </el-col>\r\n            </el-row>\r\n        </el-header>\r\n        <el-main>\r\n            <el-table :data=\"userPageData.content\" border width='80%'>\r\n                <el-table-column prop=\"id\" label=\"ID\" min-width=\"60\" fixed=\"left\" />\r\n                <el-table-column prop=\"nickname\" label=\"昵称\" min-width=\"120\" fixed=\"left\" resizable />\r\n                <el-table-column prop=\"username\" label=\"用户名\" min-width=\"120\" resizable />\r\n                <el-table-column label=\"邮箱\" width=\"200\"  resizable>\r\n                    <template v-slot=\"scope\">\r\n                        <el-link :underline=\"true\" @click=\"onGetUserDetail(scope.row)\" type=\"primary\">\r\n                            {{ scope.row.email }}\r\n                        </el-link>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"启用状态\" resizable >\r\n                    <template #header>\r\n                        <el-select v-model=\"userPageQuery.enabled\" placeholder=\"启用状态\" @change=\"onQuery\" clearable>\r\n                        <el-option\r\n                            v-for=\"item in [true, false]\"\r\n                            :key=\"item\"\r\n                            :label=\"item?'启用':'禁用'\"\r\n                            :value=\"item\"\r\n                            >\r\n                        </el-option>\r\n                    </el-select>\r\n                    </template>\r\n                    <template v-slot=\"scope\">\r\n                        <el-switch v-model=\"scope.row.enabled\" :loading=\"loading.userEnableLoading\"  @change=\"onSwitchEnabled(scope.row.id, scope.row.enabled)\" :disabled=\"shouldDisableSwitch(scope.row)\">\r\n                        </el-switch>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"系统管理员\">\r\n                    <template v-slot=\"scope\">\r\n                        <el-switch v-model=\"scope.row.isSysOwner\" :loading=\"loading.sysOwnerLoading\" @change=\"onChangeSysOwner(scope.row)\" :disabled=\"shouldDisableSwitch(scope.row)\">\r\n                        </el-switch>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"createAt\" label=\"创建时间\" min-width=\"140\"/>\r\n                <el-table-column label=\"操作\" min-width=\"120\" resizable >\r\n                    <template v-slot=\"scope\">\r\n                        <el-button icon=\"Refresh\" type=\"warning\" size=\"small\" @Click.stop=\"onRenewPassword(scope.row.id)\">重置密码</el-button>\r\n                        <el-button icon=\"Delete\" type=\"danger\" size=\"small\" @Click.stop=\"onDeleteUser(scope.row.id)\">删除账号</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n        </el-main>\r\n        <el-footer>\r\n            <el-pagination layout=\"sizes, prev, pager, next\" \r\n            :hide-on-single-page=\"false\"\r\n            :currentPage=\"userPageData.number\" \r\n            :page-size=\"userPageQuery.size\" \r\n            :page-sizes=\"[10,15,20,30]\"\r\n            :page-count=\"userPageData.totalPages\"\r\n            @size-change=\"onPageSizeChange\"\r\n            @current-change=\"onPageChange\">\r\n            </el-pagination>\r\n        </el-footer>\r\n\r\n        <!-- user detail drawer -->\r\n        <el-drawer\r\n                v-model=\"isShowUserDetailDrawer\"\r\n                title=\"用户详情\"\r\n                direction=\"rtl\"\r\n                size=\"50%\"\r\n            >\r\n            <el-descriptions\r\n                        title=\"基础信息\"\r\n                        :column=\"1\"\r\n                        border>\r\n                <el-descriptions-item label=\"ID\">{{ userDetailData.id }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"昵称\">{{ userDetailData.nickname }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"用户名\">{{ userDetailData.username }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"邮箱\" :span=\"2\">{{ userDetailData.email }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"启用状态\" :span=\"2\">{{ userDetailData.enabled?'启用中':'已禁用' }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"注册时间\" :span=\"2\">{{ userDetailData.createAt }}</el-descriptions-item>\r\n            </el-descriptions>\r\n            <br />\r\n            <h3>角色信息</h3>\r\n            <el-table :data=\"userDetailData.roles\" stripe>\r\n                <el-table-column label=\"角色\" prop=\"role\" :formatter=\"roleNameFormatter\">\r\n                </el-table-column>\r\n                <el-table-column label=\"所属分组\">\r\n                    <template v-slot=\"scope\">\r\n                        <el-link v-if=\"scope.row.groupId\" @click=\"toGroupPage(scope.row.groupId, scope.row.groupName)\">{{ scope.row.groupName }} <el-icon><List /></el-icon></el-link>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"groupId\" label=\"分组 ID\"></el-table-column>\r\n                <el-table-column prop=\"createAt\" label=\"角色分配时间\"></el-table-column>\r\n            </el-table>\r\n        </el-drawer>\r\n\r\n        <!-- user create dialog -->\r\n        <el-dialog v-model=\"isShowEditUserDialog\" width=\"38%\" center destroy-on-close title=\"创建用户\">\r\n            <el-form :model=\"userData\" label-position=\"top\" :rules=\"userFormRule\" ref=\"userFormRef\">\r\n                <el-form-item label=\"昵称\"  prop=\"nickname\">\r\n                    <el-input v-model=\"userData.nickname\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"用户名\"  prop=\"username\">\r\n                    <el-input v-model=\"userData.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\"> \r\n                    <el-input v-model=\"userData.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input\r\n                        v-model=\"userData.password\"\r\n                        type=\"password\"\r\n                        placeholder=\"请输入密码\"\r\n                        show-password\r\n                    />\r\n                </el-form-item>\r\n                <el-form-item label=\"启用状态\">\r\n                    <el-switch v-model=\"userData.enabled\">\r\n                    </el-switch>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" plain @click=\"onSaveUserData('userFormRef')\">保存</el-button>\r\n                    <el-button plain @click=\"isShowEditUserDialog = false\">取消</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n                \r\n        </el-dialog>\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { listUsers, enableUser, disableUser, renewPassword, createUser, addSysOwnerTo, removeSysOwnerFrom, getByUserId, deleteByUserId } from \"../api/User\"\r\nimport {ElMessage} from 'element-plus'\r\nimport { user } from \"../utils/auth\"\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            loading: {\r\n                sysOwnerLoading: false,\r\n                userEnableLoading: false\r\n            },\r\n            userData: {\r\n                enabled: true\r\n            },\r\n            userFormRule: {\r\n                nickname: [this.requiredInputValidRule('昵称不能为空')],\r\n                username: [this.requiredInputValidRule('用户名不能为空')],\r\n                email: [this.requiredInputValidRule('邮箱不能为空'), { type: 'email', message: '邮箱格式不正确', trigger: 'blur' }],\r\n                password: [this.requiredInputValidRule('密码不能为空'), { min: 6, max: 18, message: '密码位数位数要求在 6~18 之间', trigger: 'blur' }],\r\n            },\r\n            userPageData: {\r\n                content: [],\r\n            },\r\n            userPageQuery: {\r\n                nicknameOrUsernameOrEmailContains: null,\r\n                enabled: null,\r\n                page: 0,\r\n                size: 10\r\n            },\r\n            userDetailData: {\r\n\r\n            },\r\n            isShowUserDetailDrawer: false,\r\n            isShowEditUserDialog: false,\r\n            roleNameFormatter: function(row, column, role) {\r\n            if (role == 'SYS_OWNER') {\r\n                return '系统管理员'\r\n            } else if (role == 'GROUP_OWNER') {\r\n                return '组长'\r\n            } else if (role == 'GROUP_MEMBER') {\r\n                return '组员'\r\n            } else {\r\n                return role\r\n            }\r\n        }\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchUsers()\r\n    },\r\n    methods: {\r\n        fetchUsers() {\r\n            listUsers(this.userPageQuery).then(resp => {\r\n                if (!resp.errCode) {\r\n                    this.userPageData = resp.data\r\n                    this.userPageData.number = resp.data.number + 1\r\n                }\r\n            })\r\n        },\r\n        requiredInputValidRule(message) {\r\n            return {\r\n                required: true,\r\n                message: message,\r\n                trigger: 'blur',\r\n            }\r\n        },\r\n        onSwitchEnabled(userId, val) {\r\n            if (val) {\r\n                enableUser(userId)\r\n            } else {\r\n                disableUser(userId)\r\n            }\r\n        },\r\n        onRenewPassword(userId) {\r\n            this.$confirm('确认重置该用户密码？新密码将通过邮件下发', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                renewPassword(userId).then(resp => {\r\n                    if (!resp.errCode) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '密码重置成功',\r\n                            type: 'success',\r\n                            duration: 3 * 1000\r\n                        });\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        onDeleteUser(userId) {\r\n            this.$confirm('确认删除该用户吗？删除后无法恢复，请谨慎操作', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                deleteByUserId(userId).then(resp => {\r\n                    if (!resp.errCode) {\r\n                        this.fetchUsers()\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '用户删除成功',\r\n                            type: 'success',\r\n                            duration: 3 * 1000\r\n                        });\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        onPageChange(currentPage) {\r\n            if (currentPage && (currentPage - 1) != this.userPageQuery.page) {\r\n                this.userPageQuery.page = currentPage - 1\r\n                this.fetchUsers()\r\n            }\r\n        },\r\n        onPageSizeChange(currentSize) {\r\n            if (currentSize) {\r\n                this.userPageQuery.size = currentSize\r\n                this.fetchUsers()\r\n            }\r\n        },\r\n        onQuery() {\r\n            this.userPageQuery.page = 0\r\n            this.fetchUsers()\r\n        },\r\n        onGetUserDetail(user) {\r\n            this.isShowUserDetailDrawer = true\r\n            getByUserId(user.id).then(resp => {\r\n                if(!resp.errCode) {\r\n                    this.userDetailData = resp.data\r\n                }\r\n            })\r\n        },\r\n        onSaveUserData() {\r\n            this.$refs.userFormRef.validate(valid => {\r\n                if (valid) {\r\n                    createUser(this.userData).then(resp => {\r\n                        if (!resp.errCode) {\r\n                            this.$message.success(\"保存用户成功\")\r\n                            this.isShowEditUserDialog = false\r\n                            this.userData = {\r\n                                enabled: false\r\n                            }\r\n                            this.fetchUsers()\r\n                        }\r\n                    })\r\n                    return true\r\n                } else {\r\n                    return false\r\n                }\r\n            })\r\n            \r\n        },\r\n        onChangeSysOwner(user) {\r\n            const userId = user.id\r\n            this.loading.sysOwnerLoading = true\r\n            if (user.isSysOwner) {\r\n                return addSysOwnerTo(userId).then(resp => {\r\n                    if (!resp.errCode) {\r\n                        this.$message.success(\"启用系统管理员成功\")\r\n                    }\r\n                    this.loading.sysOwnerLoading = false\r\n                })\r\n            } else {\r\n                return removeSysOwnerFrom(userId).then(resp => {\r\n                    if (!resp.errCode) {\r\n                        this.$message.warning(\"禁用系统管理员成功\")\r\n                    }\r\n                    this.loading.sysOwnerLoading = false\r\n                })\r\n            }\r\n        },\r\n        toCreatePage() {\r\n            this.isShowEditUserDialog = true\r\n        },\r\n        toGroupPage(groupId, groupName) {\r\n            if(groupId) {\r\n                this.$router.push({path: '/groups/'+groupId, query: { groupName: groupName }})\r\n            }\r\n        },\r\n        shouldDisableSwitch(row) {\r\n            const loginData = user.loadUserLoginData()\r\n            if (loginData && loginData.id == row.id) {\r\n                return true\r\n            }\r\n            return false\r\n        },\r\n    }\r\n}\r\n\r\n</script>","import { render } from \"./UserList.vue?vue&type=template&id=70f4db59\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\git_workspace\\\\databasir\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["base","listUsers","pageQuery","axios","params","enableUser","userId","disableUser","getByUserId","deleteByUserId","createUser","request","renewPassword","id","addSysOwnerTo","removeSysOwnerFrom","updatePassword","body","updateNickname","_createElementVNode","_createBlock","_component_el_container","_createVNode","_component_el_header","_component_el_row","gutter","_component_el_col","span","_component_el_tooltip","content","placement","_component_el_button","type","icon","style","onClick","$options","_component_el_input","onChange","$data","nicknameOrUsernameOrEmailContains","$event","label","placeholder","_component_el_main","_component_el_table","data","border","width","_component_el_table_column","prop","fixed","resizable","scope","_component_el_link","underline","row","email","header","_component_el_select","enabled","clearable","_createElementBlock","_Fragment","_renderList","item","_component_el_option","key","value","_component_el_switch","loading","userEnableLoading","disabled","isSysOwner","sysOwnerLoading","size","_component_el_footer","_component_el_pagination","layout","currentPage","number","totalPages","onSizeChange","onCurrentChange","_component_el_drawer","title","direction","_component_el_descriptions","column","_component_el_descriptions_item","nickname","username","createAt","_hoisted_3","_hoisted_4","roles","stripe","formatter","groupId","groupName","_component_el_icon","_component_List","_component_el_dialog","center","_component_el_form","model","rules","ref","_component_el_form_item","password","plain","userData","userFormRule","this","requiredInputValidRule","message","trigger","min","max","userPageData","userPageQuery","page","userDetailData","isShowUserDetailDrawer","isShowEditUserDialog","roleNameFormatter","role","created","fetchUsers","methods","then","resp","errCode","required","onSwitchEnabled","val","onRenewPassword","$confirm","confirmButtonText","cancelButtonText","ElMessage","showClose","duration","onDeleteUser","onPageChange","onPageSizeChange","currentSize","onQuery","onGetUserDetail","user","onSaveUserData","$refs","userFormRef","validate","valid","$message","success","onChangeSysOwner","warning","toCreatePage","toGroupPage","$router","push","path","query","shouldDisableSwitch","loginData","__exports__","render"],"sourceRoot":""}