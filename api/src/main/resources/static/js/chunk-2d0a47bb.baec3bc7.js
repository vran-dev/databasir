(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a47bb"],{"0742":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),c={key:0},o=Object(a["createTextVNode"])("同步"),r={key:1},l={key:2},i=Object(a["createTextVNode"])("同步"),u=Object(a["createTextVNode"])("导出"),d=["id"],b=["id"],s=Object(a["createElementVNode"])("h3",null,"Columns",-1),j={key:0},O=Object(a["createElementVNode"])("h3",null,"Indexes",-1),m={key:1},p=Object(a["createElementVNode"])("h3",null,"Triggers",-1);function f(e,t,n,f,h,V){var w=Object(a["resolveComponent"])("el-button"),N=Object(a["resolveComponent"])("el-empty"),g=Object(a["resolveComponent"])("el-skeleton"),C=Object(a["resolveComponent"])("el-col"),x=Object(a["resolveComponent"])("el-option"),v=Object(a["resolveComponent"])("el-select"),D=Object(a["resolveComponent"])("el-row"),_=Object(a["resolveComponent"])("el-header"),y=Object(a["resolveComponent"])("el-descriptions-item"),k=Object(a["resolveComponent"])("el-descriptions"),B=Object(a["resolveComponent"])("el-table-column"),I=Object(a["resolveComponent"])("el-table"),P=Object(a["resolveComponent"])("el-backtop"),S=Object(a["resolveComponent"])("el-tooltip"),E=Object(a["resolveComponent"])("el-main"),T=Object(a["resolveComponent"])("el-container"),R=Object(a["resolveDirective"])("loading"),F=Object(a["resolveDirective"])("require-roles"),z=Object(a["resolveDirective"])("select-more");return f.isShowNoDataPage?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,[Object(a["createVNode"])(N,{description:"似乎还没有同步过文档"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(w,{type:"primary",icon:"refresh",round:"",size:"large",onClick:f.onSyncProjectDocument,loading:f.state.loadings.handleSync},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["onClick","loading"])]})),_:1})])):f.isShowLoadingPage?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["withDirectives"])(Object(a["createVNode"])(g,{rows:12},null,512),[[R,!f.state.init]])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[Object(a["createVNode"])(T,{class:"document-content"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(_,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(D,{gutter:20},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(C,{span:2},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(w,{type:"success",style:{width:"100%"},icon:"Refresh",onClick:f.onSyncProjectDocument,loading:f.state.loadings.handleSync},{default:Object(a["withCtx"])((function(){return[i]})),_:1},8,["onClick","loading"])]})),_:1})),[[F,["SYS_OWNER","GROUP_OWNER?groupId="+f.state.groupId,"GROUP_MEMBER?groupId="+f.state.groupId]]]),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(C,{span:2},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(w,{type:"primary",style:{width:"100%"},icon:"Download"},{default:Object(a["withCtx"])((function(){return[u]})),_:1})]})),_:1})),[[F,["SYS_OWNER","GROUP_OWNER?groupId="+f.state.groupId,"GROUP_MEMBER?groupId="+f.state.groupId]]]),Object(a["createVNode"])(C,{span:4},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(v,{onChange:f.onProjectDocumentVersionChange,modelValue:f.state.databaseDocumentFilter.version,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.state.databaseDocumentFilter.version=e}),placeholder:"历史版本",clearable:""},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(f.state.databaseDocumentVersions,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:e.version,label:"["+e.createAt+"]->"+e.version,value:e.version},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])),[[z,f.loadMoreDocumentVersions],[R,f.state.loadings.loadingVersions]])]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(E,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(k,{column:1,size:"large",border:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(y,{label:"Database Name","label-align":"left",width:"200px"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(f.state.databaseDocument.databaseName),1)]})),_:1}),Object(a["createVNode"])(y,{label:"Product Name","label-align":"left"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(f.state.databaseDocument.productName),1)]})),_:1}),Object(a["createVNode"])(y,{label:"Product Version","label-align":"left"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(f.state.databaseDocument.productVersion),1)]})),_:1}),Object(a["createVNode"])(y,{label:"Document Version","label-align":"left"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(f.state.databaseDocument.documentVersion),1)]})),_:1}),Object(a["createVNode"])(y,{label:"Create At","label-align":"left"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(f.state.databaseDocument.createAt),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("h2",{id:f.state.databaseDocument.name+".overview"},"Overview",8,d)]})),_:1})]})),_:1}),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(I,{data:f.state.databaseDocument.tables,border:"",width:"80%"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(B,{type:"index"}),Object(a["createVNode"])(B,{prop:"name",label:"Name","min-width":"160",resizable:""}),Object(a["createVNode"])(B,{prop:"type",label:"Type",width:"200",resizable:""}),Object(a["createVNode"])(B,{prop:"comment",label:"comment","min-width":"160",resizable:""})]})),_:1},8,["data"])]})),_:1})]})),_:1}),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(f.state.databaseDocument.tables,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:e},[Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("h2",{id:f.state.databaseDocument.name+"."+e.name},Object(a["toDisplayString"])(e.name),9,b)]})),_:2},1024)]})),_:2},1024),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[e.columns.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(C,{key:0},{default:Object(a["withCtx"])((function(){return[s]})),_:1})):Object(a["createCommentVNode"])("",!0)]})),_:2},1024),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(I,{data:e.columns,border:"",fit:"",width:"80%"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(B,{type:"index"}),Object(a["createVNode"])(B,{prop:"name",label:"Name","min-width":"120"}),Object(a["createVNode"])(B,{prop:"type",formatter:f.columnTypeFormat,label:"Type",width:"140"},null,8,["formatter"]),Object(a["createVNode"])(B,{prop:"nullable",label:"Is Nullable",width:"120"}),Object(a["createVNode"])(B,{prop:"autoIncrement",label:"Auto increment",width:"140"}),Object(a["createVNode"])(B,{prop:"defaultValue",label:"default","min-width":"120"}),Object(a["createVNode"])(B,{prop:"comment",label:"comment"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024),e.indexes.length>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[O]})),_:1})]})),_:1}),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(I,{data:e.indexes,border:"",fit:"",width:"80%"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(B,{type:"index"}),Object(a["createVNode"])(B,{prop:"name",label:"Name","min-width":"120"}),Object(a["createVNode"])(B,{prop:"isPrimary",label:"IsPrimary",width:"120"}),Object(a["createVNode"])(B,{prop:"isUnique",label:"Is Unique",width:"120"}),Object(a["createVNode"])(B,{prop:"columnNames",label:"Columns","min-width":"150"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024)])):Object(a["createCommentVNode"])("",!0),e.triggers.length>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",m,[Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[p]})),_:1})]})),_:1}),Object(a["createVNode"])(D,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(I,{data:e.triggers,fit:"",border:"",width:"80%"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(B,{type:"index"}),Object(a["createVNode"])(B,{prop:"name",label:"Name","min-width":"120"}),Object(a["createVNode"])(B,{prop:"timing",label:"timing"}),Object(a["createVNode"])(B,{prop:"manipulation",label:"manipulation",width:"120"}),Object(a["createVNode"])(B,{prop:"statement",label:"statement"}),Object(a["createVNode"])(B,{prop:"creatAt",label:"creatAt",width:"150"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024)])):Object(a["createCommentVNode"])("",!0)],64)})),128)),Object(a["createVNode"])(S,{content:"回到顶部",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(P,{bottom:100})]})),_:1})]})),_:1})]})),_:1})]))}var h=n("1da1"),V=(n("d3b7"),n("159b"),n("96cf"),n("6c02")),w=n("1c1e"),N="/api/v1.0",g=function(e,t){return w["a"].get(N+"/projects/"+e+"/documents",{params:t})},C=function(e){return w["a"].post(N+"/projects/"+e+"/documents")},x=function(e,t){return w["a"].get(N+"/projects/"+e+"/document_versions",{params:t})},v=n("3ef4"),D={setup:function(){var e=Object(V["c"])(),t=Object(a["reactive"])({databaseDocumentVersionFilter:{page:0,size:10},databaseDocumentVersions:[],databaseDocumentVersionTotalPages:0,databaseDocumentFilter:{version:null},databaseDocument:null,init:!1,loadings:{handleSync:!1,loadingVersions:!1},projectId:null,groupId:null});t.projectId=e.params.projectId,t.groupId=e.params.groupId;var n=Object(a["computed"])((function(){return!t.databaseDocument&&t.init})),c=Object(a["computed"])((function(){return!t.databaseDocument&&!t.init})),o=function(e,t){Object(v["a"])({showClose:!0,message:t,type:e,duration:3e3})},r=function(){var n=Object(h["a"])(regeneratorRuntime.mark((function n(){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x(e.params.projectId);case 2:return a=n.sent,t.databaseDocumentVersions=a.data.content,t.databaseDocumentVersionTotalPages=a.data.totalPages,n.next=7,g(e.params.projectId);case 7:c=n.sent,c.errCode?o("error","同步失败："+c.errMessage):c.data?t.databaseDocument=c.data:o("warn","无可用数据"),t.init=!0;case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(e){return null==e.decimalDigits?e.type+"("+e.size+")":e.type+"("+e.size+", "+e.decimalDigits+")"},i=function(){var n=Object(h["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g(e.params.projectId,t.databaseDocumentFilter);case 2:a=n.sent,a.data?(t.databaseDocument=a.data,o("success","切换成功")):o("warn","无可用数据");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),u=function(){var n=e.params.projectId;t.loadings.handleSync=!0,C(n).then((function(e){e.errCode||(r(),o("success","同步成功")),t.loadings.handleSync=!1})).catch((function(){return t.loadings.handleSync=!1}))},d=b(Object(h["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loadings.loadingVersions=!0,!(t.databaseDocumentVersionFilter.page+1<t.databaseDocumentVersionTotalPages)){n.next=8;break}return t.databaseDocumentVersionFilter.page++,n.next=5,x(e.params.projectId,t.databaseDocumentVersionFilter);case 5:a=n.sent,t.databaseDocumentVersionTotalPages=a.data.totalPages,a.data.content.length>0&&a.data.content.forEach((function(e){return t.databaseDocumentVersions.push(e)}));case 8:t.loadings.loadingVersions=!1;case 9:case"end":return n.stop()}}),n)}))),800);function b(e,t){var n=null;return function(){var a=this,c=arguments;n&&clearTimeout(n),n=setTimeout((function(){e.apply(a,c)}),t)}}return r(),{state:t,isShowNoDataPage:n,isShowLoadingPage:c,columnTypeFormat:l,loadMoreDocumentVersions:d,onProjectDocumentVersionChange:i,onSyncProjectDocument:u}}},_=n("6b0d"),y=n.n(_);const k=y()(D,[["render",f]]);t["default"]=k}}]);
//# sourceMappingURL=chunk-2d0a47bb.baec3bc7.js.map