{"version":3,"file":"js/865.d67048bf.js","mappings":"uMAUiE,Q,uKAT7DA,EAAAA,EAAAA,IAaeC,EAAA,M,kBAZX,IAWU,uBAXVD,EAAAA,EAAAA,IAWUE,EAAA,CAXmBC,MAAM,cAAY,C,kBAC3C,IASY,WATZC,EAAAA,EAAAA,IASYC,EAAA,CARPC,KAAMC,EAAAA,KACNC,MAAOD,EAAAA,MACP,YAAWA,EAAAA,UAHhB,CAMeE,OAAK,SAChB,IAAiE,EAAjEL,EAAAA,EAAAA,IAAiEM,EAAA,CAAtDC,KAAK,UAAWC,QAAK,eAAEC,EAAAA,gBAAlC,C,kBAAiD,IAAI,M,cAPzD,wCAIaN,EAAAA,c,OALjB,IAAoBA,EAAAA,c,6BA2B5B,GACIO,OACI,MAAO,CACHC,eAAgB,KAChBT,KAAM,GACNE,MAAO,GACPQ,SAAU,GACVC,SAAS,IAIjBC,UACIC,KAAKJ,eAAiBI,KAAKC,OAAOC,OAAOC,GACzCH,KAAKI,SAGTC,QAAS,CACJD,QACG,MAAME,EAAcC,OAAOC,SAASC,KAC9BP,EAASF,KAAKC,OAAOS,MAC3BR,EAAOS,aAAeL,GACtBM,EAAAA,EAAAA,IAAYZ,KAAKJ,eAAgBM,GAAQW,MAAKC,IACrCA,EAAKC,SAWNf,KAAKX,MAAQyB,EAAKE,WAClBhB,KAAKb,KAAO,UAXZ8B,EAAAA,EAAAA,kBAAuBH,EAAKnB,MAC5BK,KAAKkB,OAAOC,OAAO,aAAc,CAC7BC,SAAUN,EAAKnB,KAAKyB,SACpBC,SAAUP,EAAKnB,KAAK0B,SACpBC,MAAOR,EAAKnB,KAAK2B,MACjBC,OAAQT,EAAKnB,KAAK4B,SAEtBvB,KAAKb,KAAK,UACVa,KAAKwB,QAAQC,KAAK,CAACC,KAAM,aAK7B1B,KAAKF,SAAU,KAChB6B,OAAMC,IACLC,QAAQC,IAAI,iBAAiBF,GAC7B5B,KAAKb,KAAO,QACZa,KAAKX,MAAQ,WACbW,KAAKF,SAAU,MAIvBiC,cACI/B,KAAKwB,QAAQC,KAAK,CAACC,KAAM,S,UCpErC,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://databasir/./src/views/OAuth2Login.vue","webpack://databasir/./src/views/OAuth2Login.vue?b6ea"],"sourcesContent":["<template>\r\n    <el-container>\r\n        <el-main v-loading=\"loading\" class=\"login-main\">\r\n            <el-result\r\n                :icon=\"icon\"\r\n                :title=\"title\"\r\n                :sub-title=\"subTitle\"\r\n                v-show=\"!loading\"\r\n            >\r\n                <template #extra>\r\n                <el-button type=\"primary\" @click=\"toIndexPage()\">立即跳转</el-button>\r\n                </template>\r\n            </el-result>\r\n        </el-main>\r\n    </el-container>\r\n</template>\r\n\r\n<style>\r\n.login-main {\r\n    margin: 0 auto;\r\n    margin-top: 200px;\r\n}\r\n\r\n</style>\r\n<script>\r\nimport { oauth2Login } from \"../api/Login\"\r\nimport { user } from \"../utils/auth\"\r\n\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            registrationId: null,\r\n            icon: '',\r\n            title: '',\r\n            subTitle: '',\r\n            loading: true,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.registrationId = this.$route.params.id\r\n        this.login()\r\n    },\r\n\r\n    methods: {\r\n         login() {\r\n            const redirectUri = window.location.href\r\n            const params = this.$route.query\r\n            params.redirect_uri = redirectUri\r\n            oauth2Login(this.registrationId, params).then(resp => {\r\n                if (!resp.errCode) {\r\n                    user.saveUserLoginData(resp.data)\r\n                    this.$store.commit('userUpdate', {\r\n                        nickname: resp.data.nickname,\r\n                        username: resp.data.username,\r\n                        email: resp.data.email,\r\n                        avatar: resp.data.avatar\r\n                    })\r\n                    this.icon='success'\r\n                    this.$router.push({path: '/groups'})\r\n                } else {\r\n                    this.title = resp.errMessage\r\n                    this.icon = 'error'\r\n                }\r\n                this.loading = false\r\n            }).catch(err => {\r\n                console.log('login failed: '+err)\r\n                this.icon = 'error'\r\n                this.title = '登陆失败，请重试'\r\n                this.loading = false\r\n            })\r\n        },\r\n\r\n        toIndexPage() {\r\n            this.$router.push({path: '/'})\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./OAuth2Login.vue?vue&type=template&id=65bc9922\"\nimport script from \"./OAuth2Login.vue?vue&type=script&lang=js\"\nexport * from \"./OAuth2Login.vue?vue&type=script&lang=js\"\n\nimport \"./OAuth2Login.vue?vue&type=style&index=0&id=65bc9922&lang=css\"\n\nimport exportComponent from \"E:\\\\git_workspace\\\\databasir\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_el_container","_component_el_main","class","_createVNode","_component_el_result","icon","$data","title","extra","_component_el_button","type","onClick","$options","data","registrationId","subTitle","loading","created","this","$route","params","id","login","methods","redirectUri","window","location","href","query","redirect_uri","oauth2Login","then","resp","errCode","errMessage","user","$store","commit","nickname","username","email","avatar","$router","push","path","catch","err","console","log","toIndexPage","__exports__","render"],"sourceRoot":""}