"use strict";(self["webpackChunkdatabasir"]=self["webpackChunkdatabasir"]||[]).push([[227],{4339:function(e,a,l){l.d(a,{b:function(){return t}});const t="document_template_properties"},6631:function(e,a,l){l.d(a,{D:function(){return s},z:function(){return n}});var t=l(3872);const r="/api/v1.0",s=()=>t.Z.get(r+"/document_template/properties"),n=e=>t.Z.patch(r+"/document_template/properties",e)},3227:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(6252),r=l(9963);const s=(0,t._)("div",{class:"h3"},"Tables",-1),n=["onUpdate:modelValue","placeholder"],i=(0,t._)("div",{class:"h3"},"Columns",-1),o=["onUpdate:modelValue","placeholder"],u=(0,t._)("div",{class:"h3"},"Indexes",-1),m=["onUpdate:modelValue","placeholder"],p=(0,t._)("div",{class:"h3"},"Foreign Keys",-1),d=["onUpdate:modelValue","placeholder"],c=(0,t._)("div",{class:"h3"},"Trigger",-1),h=["onUpdate:modelValue","placeholder"];function g(e,a,l,g,_,f){const y=(0,t.up)("el-switch"),w=(0,t.up)("el-col"),N=(0,t.up)("el-row"),b=(0,t.up)("el-table-column"),C=(0,t.up)("el-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:_.showSampleData,"onUpdate:modelValue":a[0]||(a[0]=e=>_.showSampleData=e),size:"large","active-text":"展示示例数据","inactive-text":"隐藏示例数据",onChange:f.onSwitchShowSampleData},null,8,["modelValue","onChange"])])),_:1})])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{border:"",data:_.sampleData.tables,"highlight-current-row":""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.template.tableFieldNameProperties,(e=>((0,t.wg)(),(0,t.j4)(b,{label:e.key,key:e.key,prop:e.key},{header:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":a=>e.value=a,placeholder:e.defaultValue,onChange:a[1]||(a[1]=e=>f.saveTableProperties()),class:"cell"},null,40,n),[[r.nr,e.value]])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{border:"",data:_.sampleData.columns,"highlight-current-row":""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.template.columnFieldNameProperties,(e=>((0,t.wg)(),(0,t.j4)(b,{label:e.key,key:e.key,prop:e.key},{header:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":a=>e.value=a,placeholder:e.defaultValue,onChange:a[2]||(a[2]=e=>f.saveColumnProperties()),class:"cell"},null,40,o),[[r.nr,e.value]])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{border:"",data:_.sampleData.indexes},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.template.indexFieldNameProperties,(e=>((0,t.wg)(),(0,t.j4)(b,{label:e.key,key:e.key,prop:e.key},{header:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":a=>e.value=a,placeholder:e.defaultValue,onChange:a[3]||(a[3]=e=>f.saveIndexProperties()),class:"cell"},null,40,m),[[r.nr,e.value]])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{border:"",data:_.sampleData.foreignKeys},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.template.foreignKeyFieldNameProperties,(e=>((0,t.wg)(),(0,t.j4)(b,{label:e.key,key:e.key,prop:e.key},{header:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":a=>e.value=a,placeholder:e.defaultValue,onChange:a[4]||(a[4]=e=>f.saveForeignKeyProperties()),class:"cell"},null,40,d),[[r.nr,e.value]])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{border:"",data:_.sampleData.triggers},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.template.triggerFieldNameProperties,(e=>((0,t.wg)(),(0,t.j4)(b,{label:e.key,key:e.key,prop:e.key},{header:(0,t.w5)((()=>[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":a=>e.value=a,placeholder:e.defaultValue,onChange:a[5]||(a[5]=e=>f.saveTriggerProperties()),class:"cell"},null,40,h),[[r.nr,e.value]])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1})],64)}var _=l(6631),f=l(4339),y={data(){return{template:{tableFieldNameProperties:[],columnFieldNameProperties:[],foreignKeyFieldNameProperties:[],indexFieldNameProperties:[],triggerFieldNameProperties:[]},sampleData:{tables:[],columns:[],indexes:[],foreignKeys:[],triggers:[]},showSampleData:!1,inputStyle:{border:"none"}}},watch:{},created(){this.fetchDocumentTemplateProperties()},methods:{fetchDocumentTemplateProperties(){(0,_.D)().then((e=>{e.errCode||(this.template=e.data)}))},clearPropertyCache(){sessionStorage.removeItem(f.b)},saveTableProperties(){const e={type:"TABLE_FIELD_NAME",properties:this.template.tableFieldNameProperties};(0,_.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveColumnProperties(){const e={type:"COLUMN_FIELD_NAME",properties:this.template.columnFieldNameProperties};(0,_.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveIndexProperties(){const e={type:"INDEX_FIELD_NAME",properties:this.template.indexFieldNameProperties};(0,_.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveTriggerProperties(){const e={type:"TRIGGER_FIELD_NAME",properties:this.template.triggerFieldNameProperties};(0,_.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveForeignKeyProperties(){const e={type:"FOREIGN_KEY_FIELD_NAME",properties:this.template.foreignKeyFieldNameProperties};(0,_.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},onSwitchShowSampleData(e){if(e){this.sampleData.tables=[{name:"demo",type:"TABLE",comment:"demo",description:"this is a demo"},{name:"user",type:"TABLE",comment:"user",description:"this is a user"}];const e='[{"id":409,"name":"id","type":"INT","size":10,"decimalDigits":1,"comment":"id comment","description":"this is id","isPrimaryKey":true,"nullable":"NO","autoIncrement":"YES","defaultValue":"1","discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":410,"name":"email","type":"VARCHAR","size":512,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":411,"name":"username","type":"VARCHAR","size":128,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":412,"name":"password","type":"TEXT","size":65535,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"}]';this.sampleData.columns=JSON.parse(e);const a='[{"id":96,"name":"uk_email","isUnique":true,"columnNames":["email","deleted_token"],"createAt":"2022-04-10 13:45:06"},{"id":97,"name":"uk_username","isUnique":true,"columnNames":["username","deleted_token"],"createAt":"2022-04-10 13:45:06"},{"id":98,"name":"PRIMARY","isUnique":true,"columnNames":["id"],"createAt":"2022-04-10 13:45:06"}]';this.sampleData.indexes=JSON.parse(a);const l='[{"fkName":"dept_manager_ibfk_2","fkTableName":"dept_manager","fkColumnName":"dept_no","pkName":"PRIMARY","pkTableName":"departments","pkColumnName":"dept_no","updateRule":"CASCADE","deleteRule":"CASCADE"},{"fkName":"dept_manager_ibfk_1","fkTableName":"dept_manager","fkColumnName":"emp_no","pkName":"PRIMARY","pkTableName":"employees","pkColumnName":"emp_no","updateRule":"CASCADE","deleteRule":"CASCADE"}]';this.sampleData.foreignKeys=JSON.parse(l);const t='[{"id":1,"name":"custom trigger","timing":"before","manipulation":"insert","statement":"sql","triggerCreateAt":"1970-01-01 00:00:00"}]';this.sampleData.triggers=JSON.parse(t)}else this.sampleData.tables=[],this.sampleData.columns=[],this.sampleData.indexes=[],this.sampleData.foreignKeys=[],this.triggers=[]}}},w=l(3744);const N=(0,w.Z)(y,[["render",g]]);var b=N}}]);
//# sourceMappingURL=227.7913fd99.js.map