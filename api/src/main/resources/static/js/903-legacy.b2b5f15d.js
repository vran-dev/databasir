"use strict";(self["webpackChunkdatabasir"]=self["webpackChunkdatabasir"]||[]).push([[903],{57327:function(e,t,n){var r=n(82109),o=n(42092).filter,a=n(81194),u=a("filter");r({target:"Array",proto:!0,forced:!u},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},69826:function(e,t,n){var r=n(82109),o=n(42092).find,a=n(51223),u="find",l=!0;u in[]&&Array(1)[u]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(u)},66299:function(e,t,n){n.d(t,{ew:function(){return u},wu:function(){return l},r6:function(){return i},ns:function(){return c},OE:function(){return s},Zu:function(){return m},RE:function(){return p}});var r=n(63872),o="/api/v1.0/database_types",a="/api/v1.0/simple_database_types",u=function(e){return r.Z["delete"](o+"/"+e)},l=function(e){return r.Z.post(o,e)},i=function(e){return r.Z.patch(o,e)},c=function(){return r.Z.get(a)},s=function(e){return r.Z.get(o,{params:e})},m=function(e){return r.Z.post(o+"/driver_class_name",e)},p=function(e){return r.Z.post("/api/v1.0/database_types/upload_driver",e,{headers:{"Content-Type":"multipart/form-data"}})}},5430:function(e,t,n){n.d(t,{v:function(){return a}});var r=n(63872),o="/api/v1.0/operation_logs",a=function(e){return r.Z.get(o,{params:e})}},61903:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});n(68309),n(82526),n(41817);var r=n(66252),o=n(3577),a=(0,r.Uk)("新建"),u={key:1},l=(0,r.Uk)(" 更多 "),i=(0,r.Uk)("编辑项目"),c=(0,r.Uk)("查看文档"),s=(0,r.Uk)(" 关注项目 "),m=(0,r.Uk)(" 取消关注 "),p=(0,r.Uk)("查看日志"),d=(0,r.Uk)("删除项目"),f=(0,r._)("h3",null,"基础信息",-1),g=(0,r._)("h3",null,"连接配置",-1),w=(0,r.Uk)("- 删除"),h=(0,r.Uk)("+ 添加"),b=(0,r.Uk)("+ 添加"),y=(0,r.Uk)(" 测试连接 "),j=(0,r._)("h2",null,"同步规则",-1),C=(0,r.Uk)("- 删除"),_=(0,r.Uk)("+ 添加"),W=(0,r.Uk)("+ 添加"),P=(0,r.Uk)("- 删除"),k=(0,r.Uk)("+ 添加"),S=(0,r.Uk)("+ 添加"),F=(0,r.Uk)("保存"),R=(0,r.Uk)("取消"),U={key:0},D=(0,r.Uk)("成功"),v={key:1},z=(0,r.Uk)("失败"),x={key:0},N={key:1},V=(0,r.Uk)("添加成员"),O=(0,r.Uk)("移除"),M=(0,r.Uk)("升为组长"),T=(0,r.Uk)("设为组员"),I={key:0},E=(0,r.Uk)("启用中"),G={key:1},L=(0,r.Uk)("已禁用"),$={key:0},A=(0,r.Uk)("移除"),Q={key:1},q=(0,r.Uk)("+ 添加组员"),B=(0,r.Uk)("+ 添加组长");function Y(e,t,n,Y,Z,K){var H=(0,r.up)("el-button"),J=(0,r.up)("el-tooltip"),X=(0,r.up)("el-col"),ee=(0,r.up)("el-input"),te=(0,r.up)("el-option"),ne=(0,r.up)("el-select"),re=(0,r.up)("el-row"),oe=(0,r.up)("el-table-column"),ae=(0,r.up)("star-filled"),ue=(0,r.up)("el-icon"),le=(0,r.up)("el-link"),ie=(0,r.up)("database-icon"),ce=(0,r.up)("el-tag"),se=(0,r.up)("arrow-down"),me=(0,r.up)("el-dropdown-item"),pe=(0,r.up)("el-dropdown-menu"),de=(0,r.up)("el-dropdown"),fe=(0,r.up)("el-table"),ge=(0,r.up)("el-pagination"),we=(0,r.up)("el-form-item"),he=(0,r.up)("el-descriptions-item"),be=(0,r.up)("el-descriptions"),ye=(0,r.up)("check"),je=(0,r.up)("close"),Ce=(0,r.up)("el-tab-pane"),_e=(0,r.up)("el-switch"),We=(0,r.up)("el-space"),Pe=(0,r.up)("el-tabs"),ke=(0,r.up)("el-divider"),Se=(0,r.up)("el-form"),Fe=(0,r.up)("el-dialog"),Re=(0,r.up)("el-drawer"),Ue=(0,r.up)("el-affix"),De=(0,r.Q2)("require-roles");return(0,r.wg)(),(0,r.j4)(Pe,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(Ce,{label:"项目列表"},{default:(0,r.w5)((function(){return[(0,r.Wm)(re,{gutter:12},{default:(0,r.w5)((function(){return[(0,r.wy)(((0,r.wg)(),(0,r.j4)(X,{xs:24,sm:6,md:4,lg:2,style:{"margin-bottom":"12px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(J,{content:"新建一个新项目",placement:"top"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"primary",style:{width:"100%"},icon:"plus",onClick:K.toCreateProject},{default:(0,r.w5)((function(){return[a]})),_:1},8,["onClick"])]})),_:1})]})),_:1})),[[De,["SYS_OWNER","GROUP_OWNER?groupId="+Z.groupId,"GROUP_MEMBER?groupId="+Z.groupId]]]),(0,r.Wm)(X,{xs:24,sm:8,md:5,lg:6,style:{"margin-bottom":"12px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{onChange:K.onProjectQuery,modelValue:Z.projectFilter.nameContains,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Z.projectFilter.nameContains=e}),label:"项目名",placeholder:"项目名称搜索","prefix-icon":"search"},null,8,["onChange","modelValue"])]})),_:1}),(0,r.Wm)(X,{xs:24,sm:8,md:5,lg:6,style:{"margin-bottom":"12px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{onChange:K.onProjectQuery,modelValue:Z.projectFilter.databaseNameContains,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Z.projectFilter.databaseNameContains=e}),label:"数据库名",placeholder:"数据库名称搜索","prefix-icon":"search"},null,8,["onChange","modelValue"])]})),_:1}),(0,r.Wm)(X,{xs:24,sm:8,md:5,lg:6,style:{"margin-bottom":"12px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{onChange:K.onProjectQuery,modelValue:Z.projectFilter.schemaNameContains,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Z.projectFilter.schemaNameContains=e}),label:"Schema",placeholder:"Schema 名称搜索","prefix-icon":"search"},null,8,["onChange","modelValue"])]})),_:1}),(0,r.Wm)(X,{xs:24,sm:8,md:5,lg:4,style:{"margin-bottom":"12px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ne,{onChange:K.onProjectQuery,onClear:t[3]||(t[3]=function(e){return K.onProjectDatabaseTypeClear()}),modelValue:Z.projectFilter.databaseType,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Z.projectFilter.databaseType=e}),placeholder:"选择数据库类型",clearable:""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.databaseTypes,(function(e,t){return(0,r.wg)(),(0,r.j4)(te,{key:t,label:e.databaseType,value:e.databaseType},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(re,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(fe,{data:Z.projectPageData.data},{default:(0,r.w5)((function(){return[(0,r.Wm)(oe,{prop:"id",label:"ID","min-width":"60"}),(0,r.Wm)(oe,{label:"项目名称","min-width":"120",resizable:""},{default:(0,r.w5)((function(e){return[(0,r.Wm)(le,{underline:!1},{default:(0,r.w5)((function(){return[e.row.isFavorite?((0,r.wg)(),(0,r.j4)(ue,{key:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(ae)]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(le,{underline:!0,onClick:function(t){return K.toDocumentPage(e.row)}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.row.name),1)]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:1}),(0,r.Wm)(oe,{prop:"databaseName",label:"数据库",width:"200",resizable:""}),(0,r.Wm)(oe,{prop:"schemaName",label:"Schema",width:"200",resizable:""}),(0,r.Wm)(oe,{label:"数据库类型"},{default:(0,r.w5)((function(e){return[(0,r.Wm)(ie,{databaseType:e.row.databaseType,icon:K.databaseTypeIcon(e.row)},null,8,["databaseType","icon"])]})),_:1}),(0,r.Wm)(oe,{prop:"description",label:"说明","min-width":"160",resizable:""}),(0,r.Wm)(oe,{label:"定时同步",align:"center"},{default:(0,r.w5)((function(e){return[e.row.isAutoSync?((0,r.wg)(),(0,r.j4)(ce,{key:0},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.row.autoSyncCron),1)]})),_:2},1024)):((0,r.wg)(),(0,r.iD)("span",u," 无 "))]})),_:1}),(0,r.Wm)(oe,{prop:"createAt",label:"创建时间","min-width":"120",resizable:""}),(0,r.Wm)(oe,{label:"操作","min-width":"180",align:"center",resizable:""},{default:(0,r.w5)((function(e){return[(0,r.Wm)(de,null,{dropdown:(0,r.w5)((function(){return[(0,r.Wm)(pe,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(me,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"primary",plain:"",size:"small",onClick:function(t){return K.toEditProject(e.row)},icon:"Edit"},{default:(0,r.w5)((function(){return[i]})),_:2},1032,["onClick"])]})),_:2},1024),(0,r.Wm)(me,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"primary",plain:"",size:"small",onClick:function(t){return K.toDocumentPage(e.row)},icon:"View"},{default:(0,r.w5)((function(){return[c]})),_:2},1032,["onClick"])]})),_:2},1024),(0,r.Wm)(me,null,{default:(0,r.w5)((function(){return[e.row.isFavorite?((0,r.wg)(),(0,r.j4)(H,{key:1,type:"primary",size:"small",onClick:function(t){return K.onRemoveProjectFavorite(e.row)},icon:"StarFilled"},{default:(0,r.w5)((function(){return[m]})),_:2},1032,["onClick"])):((0,r.wg)(),(0,r.j4)(H,{key:0,type:"primary",plain:"",size:"small",onClick:function(t){return K.onAddProjectFavorite(e.row)},icon:"Star"},{default:(0,r.w5)((function(){return[s]})),_:2},1032,["onClick"]))]})),_:2},1024),(0,r.Wm)(me,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"primary",plain:"",size:"small",onClick:function(t){return K.toProjectOperationLogDrawer(e.row)},icon:"Tickets"},{default:(0,r.w5)((function(){return[p]})),_:2},1032,["onClick"])]})),_:2},1024),(0,r.wy)(((0,r.wg)(),(0,r.j4)(me,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"danger",plain:"",size:"small",onClick:function(t){return K.onProjectDelete(e.row.id)},icon:"Remove"},{default:(0,r.w5)((function(){return[d]})),_:2},1032,["onClick"])]})),_:2},1024)),[[De,["SYS_OWNER","GROUP_OWNER?groupId="+Z.groupId]]])]})),_:2},1024)]})),default:(0,r.w5)((function(){return[(0,r._)("span",null,[l,(0,r.Wm)(ue,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(se)]})),_:1})])]})),_:2},1024)]})),_:1})]})),_:1},8,["data"])]})),_:1}),(0,r.Wm)(re,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(X,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(ge,{layout:"prev, pager, next","hide-on-single-page":!1,currentPage:Z.projectPageData.number,"page-size":Z.projectPageData.size,"page-count":Z.projectPageData.totalPages,onCurrentChange:K.onProjectListCurrentPageChange},null,8,["currentPage","page-size","page-count","onCurrentChange"])]})),_:1})]})),_:1}),(0,r.Wm)(Fe,{modelValue:Z.isShowProjectEditDialog,"onUpdate:modelValue":t[17]||(t[17]=function(e){return Z.isShowProjectEditDialog=e}),width:"42%",center:"","destroy-on-close":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(Se,{model:Z.projectForm,"label-position":"top",rules:Z.projectFormRules,ref:"projectFormRulesRef"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Pe,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(Ce,{label:"基础配置"},{default:(0,r.w5)((function(){return[f,(0,r.Wm)(re,{gutter:33},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{xs:24,sm:24,md:12,lg:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"名称",prop:"name"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Z.projectForm.name=e}),placeholder:"项目名称"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"描述",prop:"description"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.description,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Z.projectForm.description=e}),type:"textarea",placeholder:"项目描述"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),g,(0,r.Wm)(re,{gutter:33},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{xs:24,sm:24,md:12,lg:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"用户名",prop:"dataSource.username"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.dataSource.username,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Z.projectForm.dataSource.username=e}),placeholder:"root"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"密码",prop:"dataSource.password"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.dataSource.password,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Z.projectForm.dataSource.password=e}),placeholder:"**********",type:e.password,"show-password":""},null,8,["modelValue","type"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12,lg:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"地址",prop:"dataSource.url"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.dataSource.url,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Z.projectForm.dataSource.url=e}),placeholder:"127.0.0.1:3306"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"数据库类型",prop:"dataSource.databaseType"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ne,{modelValue:Z.projectForm.dataSource.databaseType,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Z.projectForm.dataSource.databaseType=e}),placeholder:"选择数据库类型",clearable:""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.databaseTypes,(function(e,t){return(0,r.wg)(),(0,r.j4)(te,{key:t,label:e.databaseType,value:e.databaseType},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12,lg:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"数据库名称",prop:"dataSource.databaseName"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.dataSource.databaseName,"onUpdate:modelValue":t[11]||(t[11]=function(e){return Z.projectForm.dataSource.databaseName=e}),placeholder:"需要同步的数据库名称"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(X,{xs:24,sm:24,md:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(we,{label:"Schema 名称",prop:"dataSource.schemaName"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.dataSource.schemaName,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Z.projectForm.dataSource.schemaName=e}),placeholder:"需要同步的 Schema 名称"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.projectForm.dataSource.properties,(function(e,t){return(0,r.wg)(),(0,r.j4)(we,{label:t>0?"":"属性",key:t},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{xs:24,sm:8,md:6,style:{"margin-right":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:e.key,"onUpdate:modelValue":function(t){return e.key=t},modelModifiers:{trim:!0},placeholder:"Key"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,r.Wm)(X,{xs:24,sm:8,md:6,style:{"margin-right":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},modelModifiers:{trim:!0},placeholder:"Value"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,r.Wm)(X,{xs:24,sm:12,md:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:function(e){return K.removeDataSourceProperty(t)},style:{color:"#F56C6C"}},{default:(0,r.w5)((function(){return[w]})),_:2},1032,["onClick"]),t+1==Z.projectForm.dataSource.properties.length?((0,r.wg)(),(0,r.j4)(H,{key:0,type:"text",size:"small",onClick:K.addDataSourceProperty},{default:(0,r.w5)((function(){return[h]})),_:1},8,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024)]})),_:2},1032,["label"])})),128)),0==Z.projectForm.dataSource.properties.length?((0,r.wg)(),(0,r.j4)(we,{key:0,label:"属性"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:K.addDataSourceProperty},{default:(0,r.w5)((function(){return[b]})),_:1},8,["onClick"])]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(be,{column:2,border:"",style:{"margin-bottom":"20px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(he,{label:"连接地址验证"},{default:(0,r.w5)((function(){return[(0,r.Wm)(J,{content:"地址不包含属性配置，若地址不对请联系管理员修改对应数据库类型配置"},{default:(0,r.w5)((function(){return[(0,r.Wm)(le,{underline:!1,type:"warning"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(K.sampleUrl()),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(we,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(X,null,{default:(0,r.w5)((function(){return[Z.testConnectionState.isTest?((0,r.wg)(),(0,r.j4)(H,{key:0,plain:"",circle:"",type:Z.testConnectionState.buttonType,size:"small"},{default:(0,r.w5)((function(){return[Z.testConnectionState.success?((0,r.wg)(),(0,r.j4)(ue,{key:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(ye)]})),_:1})):((0,r.wg)(),(0,r.j4)(ue,{key:1},{default:(0,r.w5)((function(){return[(0,r.Wm)(je)]})),_:1}))]})),_:1},8,["type"])):(0,r.kq)("",!0),(0,r.Wm)(H,{type:Z.testConnectionState.buttonType,plain:"",size:"small",onClick:t[13]||(t[13]=function(e){return K.onTestConnection("projectFormRulesRef")}),loading:Z.loading.testConnection},{default:(0,r.w5)((function(){return[y]})),_:1},8,["type","loading"])]})),_:1}),Z.testConnectionState.isTest&&!Z.testConnectionState.success?((0,r.wg)(),(0,r.j4)(X,{key:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(le,{type:"danger",underline:!1},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(Z.testConnectionState.message),1)]})),_:1})]})),_:1})):(0,r.kq)("",!0)]})),_:1})]})),_:1}),(0,r.Wm)(Ce,{label:"高级配置"},{default:(0,r.w5)((function(){return[j,(0,r.Wm)(we,{label:"定时同步"},{default:(0,r.w5)((function(){return[(0,r.Wm)(We,{wrap:"",size:33},{default:(0,r.w5)((function(){return[(0,r.Wm)(_e,{modelValue:Z.projectForm.projectSyncRule.isAutoSync,"onUpdate:modelValue":t[14]||(t[14]=function(e){return Z.projectForm.projectSyncRule.isAutoSync=e})},null,8,["modelValue"]),Z.projectForm.projectSyncRule.isAutoSync?((0,r.wg)(),(0,r.j4)(ee,{key:0,modelValue:Z.projectForm.projectSyncRule.autoSyncCron,"onUpdate:modelValue":t[15]||(t[15]=function(e){return Z.projectForm.projectSyncRule.autoSyncCron=e}),placeholder:"CRON 表达式"},null,8,["modelValue"])):(0,r.kq)("",!0)]})),_:1})]})),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.projectForm.projectSyncRule.ignoreTableNameRegexes,(function(e,t){return(0,r.wg)(),(0,r.j4)(we,{label:t>0?"":"忽略表名称（支持正则表达式）",key:t},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{xs:24,sm:12,md:8,style:{"margin-right":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.projectSyncRule.ignoreTableNameRegexes[t],"onUpdate:modelValue":function(e){return Z.projectForm.projectSyncRule.ignoreTableNameRegexes[t]=e},placeholder:"name regex"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,r.Wm)(X,{xs:24,sm:12,md:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:function(e){return K.removeIgnoreTableName(t)},style:{color:"#F56C6C"}},{default:(0,r.w5)((function(){return[C]})),_:2},1032,["onClick"]),t+1==Z.projectForm.projectSyncRule.ignoreTableNameRegexes.length?((0,r.wg)(),(0,r.j4)(H,{key:0,type:"text",size:"small",onClick:K.addIgnoreTableName},{default:(0,r.w5)((function(){return[_]})),_:1},8,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024)]})),_:2},1032,["label"])})),128)),0==Z.projectForm.projectSyncRule.ignoreTableNameRegexes.length?((0,r.wg)(),(0,r.j4)(we,{key:0,label:"忽略表名称（支持正则表达式）"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:K.addIgnoreTableName},{default:(0,r.w5)((function(){return[W]})),_:1},8,["onClick"])]})),_:1})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.projectForm.projectSyncRule.ignoreColumnNameRegexes,(function(e,t){return(0,r.wg)(),(0,r.j4)(we,{label:t>0?"":"忽略列名称（支持正则表达式）",key:t},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{xs:24,sm:12,md:8,style:{"margin-right":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{modelValue:Z.projectForm.projectSyncRule.ignoreColumnNameRegexes[t],"onUpdate:modelValue":function(e){return Z.projectForm.projectSyncRule.ignoreColumnNameRegexes[t]=e},placeholder:"name regex"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,r.Wm)(X,{xs:24,sm:12,md:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:function(e){return K.removeIgnoreColumnName(t)},style:{color:"#F56C6C"}},{default:(0,r.w5)((function(){return[P]})),_:2},1032,["onClick"]),t+1==Z.projectForm.projectSyncRule.ignoreColumnNameRegexes.length?((0,r.wg)(),(0,r.j4)(H,{key:0,type:"text",size:"small",onClick:K.addIgnoreColumnName},{default:(0,r.w5)((function(){return[k]})),_:1},8,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024)]})),_:2},1032,["label"])})),128)),0==Z.projectForm.projectSyncRule.ignoreColumnNameRegexes.length?((0,r.wg)(),(0,r.j4)(we,{key:1,label:"忽略列名称（支持正则表达式）"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"text",size:"small",onClick:K.addIgnoreColumnName},{default:(0,r.w5)((function(){return[S]})),_:1},8,["onClick"])]})),_:1})):(0,r.kq)("",!0)]})),_:1})]})),_:1}),(0,r.Wm)(we,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(ke,{"content-position":"center"}),(0,r.Wm)(H,{type:"primary",onClick:t[16]||(t[16]=function(e){return K.onProjectFormSave("projectFormRulesRef")})},{default:(0,r.w5)((function(){return[F]})),_:1}),(0,r.Wm)(H,{onClick:K.onProjectFormCancel},{default:(0,r.w5)((function(){return[R]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue"]),(0,r.Wm)(Re,{modelValue:Z.isShowProjectOperationLogDrawer,"onUpdate:modelValue":t[18]||(t[18]=function(e){return Z.isShowProjectOperationLogDrawer=e}),title:"项目日志",size:"50%"},{default:(0,r.w5)((function(){return[(0,r.Wm)(fe,{data:Z.projectOperationLogPageData.data},{default:(0,r.w5)((function(){return[(0,r.Wm)(oe,{prop:"id",label:"ID"}),(0,r.Wm)(oe,{prop:"operatorNickname",label:"操作人"}),(0,r.Wm)(oe,{prop:"operationName",label:"操作"}),(0,r.Wm)(oe,{label:"状态"},{default:(0,r.w5)((function(e){return[e.row.isSuccess?((0,r.wg)(),(0,r.iD)("span",U,[(0,r.Wm)(ce,{type:"success"},{default:(0,r.w5)((function(){return[D]})),_:1})])):((0,r.wg)(),(0,r.iD)("span",v,[(0,r.Wm)(ce,{type:"danger"},{default:(0,r.w5)((function(){return[z]})),_:1})]))]})),_:1}),(0,r.Wm)(oe,{label:"错误信息"},{default:(0,r.w5)((function(e){return[e.row.isSuccess?((0,r.wg)(),(0,r.iD)("span",x)):((0,r.wg)(),(0,r.iD)("span",N,(0,o.zw)(e.row.operationResponse.errMessage),1))]})),_:1}),(0,r.Wm)(oe,{prop:"createAt",label:"记录时间"})]})),_:1},8,["data"]),(0,r.Wm)(ge,{layout:"prev, pager, next","hide-on-single-page":!1,currentPage:Z.projectOperationLogPageData.number,"page-size":Z.projectOperationLogPageData.size,"page-count":Z.projectOperationLogPageData.totalPages,onCurrentChange:K.onProjectOperationLogCurrentPageChange},null,8,["currentPage","page-size","page-count","onCurrentChange"])]})),_:1},8,["modelValue"])]})),_:1}),(0,r.Wm)(Ce,{label:"分组成员"},{default:(0,r.w5)((function(){return[(0,r.Wm)(re,{gutter:33},{default:(0,r.w5)((function(){return[(0,r.wy)(((0,r.wg)(),(0,r.j4)(X,{span:3},{default:(0,r.w5)((function(){return[(0,r.Wm)(J,{content:"添加一个新组员",placement:"top"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{type:"primary",style:{width:"100%"},icon:"plus",onClick:t[19]||(t[19]=function(e){return K.onClickShowAddGroupMemberDrawer()})},{default:(0,r.w5)((function(){return[V]})),_:1})]})),_:1})]})),_:1})),[[De,["SYS_OWNER","GROUP_OWNER?groupId="+Z.groupId]]]),(0,r.Wm)(X,{span:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{onChange:t[20]||(t[20]=function(e){return K.onGroupMemberQuery()}),modelValue:Z.groupMemberFilter.nicknameOrUsernameOrEmailContains,"onUpdate:modelValue":t[21]||(t[21]=function(e){return Z.groupMemberFilter.nicknameOrUsernameOrEmailContains=e}),placeholder:"成员昵称、用户名、邮箱搜索","prefix-icon":"search"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(re,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(X,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(fe,{data:Z.groupMemberPageData.data,border:"",width:"80%"},{default:(0,r.w5)((function(){return[(0,r.Wm)(oe,{prop:"userId",label:"用户 ID","min-width":"60"}),(0,r.Wm)(oe,{prop:"nickname",label:"昵称","min-width":"120",resizable:""}),(0,r.Wm)(oe,{prop:"username",label:"用户名","min-width":"120",resizable:""}),(0,r.Wm)(oe,{prop:"email",label:"邮箱",width:"200",resizable:""}),(0,r.Wm)(oe,{label:Z.roleColumnLabel,resizable:"",align:"center"},{header:(0,r.w5)((function(){return[(0,r.Wm)(de,null,{dropdown:(0,r.w5)((function(){return[(0,r.Wm)(pe,null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Z.roleAndNameMap,(function(e,t){return(0,r.wg)(),(0,r.j4)(me,{key:t,onClick:function(t){return K.onGroupMemberRoleFilter(e)},icon:e.icon},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.text),1)]})),_:2},1032,["onClick","icon"])})),128))]})),_:1})]})),default:(0,r.w5)((function(){return[(0,r._)("span",null,[(0,r.Uk)((0,o.zw)(Z.roleColumnLabel)+" ",1),(0,r.Wm)(ue,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(se)]})),_:1})])]})),_:1})]})),default:(0,r.w5)((function(e){return["GROUP_OWNER"==e.row.role?((0,r.wg)(),(0,r.j4)(ce,{key:0,type:"danger",effect:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(K.formatRoleName(e.row.role)),1)]})),_:2},1024)):((0,r.wg)(),(0,r.j4)(ce,{key:1,effect:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(K.formatRoleName(e.row.role)),1)]})),_:2},1024))]})),_:1},8,["label"]),(0,r.Wm)(oe,{prop:"createAt",label:"入组时间","min-width":"160",resizable:""}),(0,r.wy)(((0,r.wg)(),(0,r.j4)(oe,{label:"操作","min-width":"120",resizable:""},{default:(0,r.w5)((function(e){return[(0,r.Wm)(H,{type:"danger",size:"small",onClick:function(t){return K.onGroupMemberRemove(e.row.nickname,e.row.userId)},plain:""},{default:(0,r.w5)((function(){return[O]})),_:2},1032,["onClick"]),"GROUP_MEMBER"==e.row.role?((0,r.wg)(),(0,r.j4)(H,{key:0,plain:"",size:"small",onClick:function(t){return K.onGroupMemberRoleUpdate(e.row,"GROUP_OWNER")}},{default:(0,r.w5)((function(){return[M]})),_:2},1032,["onClick"])):((0,r.wg)(),(0,r.j4)(H,{key:1,size:"small",onClick:function(t){return K.onGroupMemberRoleUpdate(e.row,"GROUP_MEMBER")},plain:""},{default:(0,r.w5)((function(){return[T]})),_:2},1032,["onClick"]))]})),_:1})),[[De,["SYS_OWNER","GROUP_OWNER?groupId="+Z.groupId]]])]})),_:1},8,["data"])]})),_:1})]})),_:1}),(0,r.Wm)(re,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(X,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(ge,{layout:"prev, pager, next","hide-on-single-page":!1,currentPage:Z.groupMemberPageData.number,"page-size":Z.groupMemberPageData.size,"page-count":Z.groupMemberPageData.totalPages,onCurrentChange:K.onGroupMemberCurrentPageChange},null,8,["currentPage","page-size","page-count","onCurrentChange"])]})),_:1})]})),_:1}),(0,r.Wm)(Re,{modelValue:Z.isShowAddGroupMemberDrawer,"onUpdate:modelValue":t[23]||(t[23]=function(e){return Z.isShowAddGroupMemberDrawer=e}),title:"添加成员",direction:"btt",size:"50%"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Ue,{offset:0,position:"top",target:".el-drawer__body"},{default:(0,r.w5)((function(){return[(0,r.Wm)(re,{gutter:33},{default:(0,r.w5)((function(){return[(0,r.Wm)(X,{span:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(ee,{onChange:K.fetchUsers,modelValue:Z.userPageQuery.nicknameOrUsernameOrEmailContains,"onUpdate:modelValue":t[22]||(t[22]=function(e){return Z.userPageQuery.nicknameOrUsernameOrEmailContains=e}),label:"用户名",placeholder:"输入昵称、用户名或邮箱搜索","prefix-icon":"search"},null,8,["onChange","modelValue"])]})),_:1}),(0,r.Wm)(X,{span:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(ge,{layout:"sizes, prev, pager, next","hide-on-single-page":!1,currentPage:Z.userPageQuery.number,"page-size":Z.userPageQuery.size,"page-sizes":[5,10,20,30],"page-count":Z.userPageData.totalPages,onSizeChange:K.onUserPageSizeChange,onCurrentChange:K.fetchUsers},null,8,["currentPage","page-size","page-count","onSizeChange","onCurrentChange"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(re,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(X,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(fe,{data:Z.userPageData.data,style:{width:"100%"},border:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(oe,{prop:"id",label:"用户 ID",width:"80"}),(0,r.Wm)(oe,{prop:"nickname",label:"昵称"}),(0,r.Wm)(oe,{prop:"username",label:"用户名"}),(0,r.Wm)(oe,{prop:"email",label:"邮箱"}),(0,r.Wm)(oe,{label:"启用状态",width:"100"},{default:(0,r.w5)((function(e){return[e.row.enabled?((0,r.wg)(),(0,r.iD)("span",I,[(0,r.Wm)(ce,{type:"success"},{default:(0,r.w5)((function(){return[E]})),_:1})])):((0,r.wg)(),(0,r.iD)("span",G,[(0,r.Wm)(ce,{type:"danger"},{default:(0,r.w5)((function(){return[L]})),_:1})]))]})),_:1}),(0,r.Wm)(oe,{label:"操作"},{default:(0,r.w5)((function(e){return[K.isInGroup(e.row)?((0,r.wg)(),(0,r.iD)("span",$,[(0,r.Wm)(H,{type:"danger",size:"small",onClick:function(t){return K.onGroupMemberRemove(e.row.nickname,e.row.id)},plain:""},{default:(0,r.w5)((function(){return[A]})),_:2},1032,["onClick"])])):((0,r.wg)(),(0,r.iD)("span",Q,[(0,r.Wm)(H,{type:"primary",plain:"",size:"small",onClick:function(t){return K.onGroupMemberAdd(e.row.id,"GROUP_MEMBER")}},{default:(0,r.w5)((function(){return[q]})),_:2},1032,["onClick"]),(0,r.Wm)(H,{type:"plain",plain:"",size:"small",onClick:function(t){return K.onGroupMemberAdd(e.row.id,"GROUP_OWNER")}},{default:(0,r.w5)((function(){return[B]})),_:2},1032,["onClick"])]))]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})}n(41539),n(54747),n(57327),n(40561),n(69826),n(74916),n(15306);var Z=n(79324),K=n(78337),H=n(63110),J=n(5430),X=n(20610),ee=n(66299),te=n(19080),ne={data:function(){return{isShowProjectEditDialog:!1,isShowAddGroupMemberDrawer:!1,isShowProjectOperationLogDrawer:!1,projectPageData:{data:[],number:1,size:15,totalElements:0,totalPages:1},projectFilter:{page:0,size:15,groupId:null,databaseType:null,nameContains:null,databaseNameContains:null},groupMemberPageData:{data:[],number:1,size:10,totalElements:0,totalPages:1},groupMemberFilter:{page:0,size:10,role:null,nicknameOrUsernameOrEmailContains:null},userPageQuery:{page:0,size:10,nicknameOrUsernameOrEmailContains:null},userPageData:{data:[],number:1,size:8,totalElements:0,totalPages:1},projectForm:{id:null,name:null,description:null,groupId:null,dataSource:{username:null,databaseType:null,databaseName:null,password:null,url:null,properties:[]},projectSyncRule:{isAutoSync:!1,autoSyncCron:null,ignoreTableNameRegexes:[],ignoreColumnNameRegexes:[]}},projectFormRules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],dataSource:{username:[{required:!0,message:"数据库用户名不能为空",trigger:"blur"}],url:[{required:!0,message:"数据库连接地址不能为空",trigger:"blur"}],databaseName:[{required:!0,message:"数据库名称不能为空",trigger:"blur"}],schemaName:[{required:!0,message:"schema 名称不能为空",trigger:"blur"}],databaseType:[{required:!0,message:"请选择数据库类型",trigger:"change"}]}},testConnectionState:{buttonType:"primary",isTest:!1,success:!1,message:null},loading:{testConnection:!1},projectOperationLogPageData:{data:[],number:1,size:10,totalElements:0,totalPages:1},projectOperationLogPageQuery:{page:0,size:10,involveProjectId:null,module:"project"},groupId:null,databaseTypes:[],roleColumnLabel:"角色",roleAndNameMap:[{text:"全部",icon:"List"},{text:"组长",value:"GROUP_OWNER",icon:"UserFilled"},{text:"组员",value:"GROUP_MEMBER",icon:"User"}]}},mounted:function(){var e=this;(0,ee.ns)().then((function(t){e.databaseTypes=t.data}))},created:function(){var e=this;this.$route.params.groupId&&(this.projectFilter.groupId=this.$route.params.groupId,this.groupId=this.$route.params.groupId),this.$watch((function(){return e.projectForm.dataSource}),(function(){e.testConnectionState.isTest=!1,e.testConnectionState.buttonType="primary"}),{deep:!0}),this.fetchGroupProjects(),this.fetchGroupMembers()},methods:{formatRoleName:function(e){return"GROUP_OWNER"==e?"组长":"GROUP_MEMBER"==e?"组员":"未知"},fetchGroupMembers:function(e){var t=this;this.groupMemberFilter.page=e?e-1:0,(0,K.yF)(this.$route.params.groupId,this.groupMemberFilter).then((function(e){t.groupMemberPageData.data=e.data.content,t.groupMemberPageData.number=e.data.number+1,t.groupMemberPageData.size=e.data.size,t.groupMemberPageData.totalPages=e.data.totalPages,t.groupMemberPageData.totalElements=e.data.totalElements}))},onGroupRoleFilterClear:function(){this.groupMemberFilter.role=null},onGroupMemberQuery:function(){this.groupMemberFilter.page=0,this.fetchGroupMembers()},onGroupMemberRoleFilter:function(e){e.value?(this.roleColumnLabel=e.text,this.groupMemberFilter.role=e.value):(this.roleColumnLabel="角色",this.groupMemberFilter.role=null),this.onGroupMemberQuery()},onGroupMemberCurrentPageChange:function(e){e&&e-1!=this.groupMemberFilter.page&&(this.groupMemberFilter.page=e-1,this.fetchGroupMembers())},onGroupMemberRemove:function(e,t){var n=this,r=this.$route.params.groupId;this.$confirm("确认移除成员["+e+"]","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,K._j)(r,t).then((function(e){e.errCode||(n.$message.success("移除成功"),n.fetchGroupMembers(),n.isShowAddGroupMemberDrawer&&n.userPageData.data.filter((function(e){return e.id==t})).forEach((function(e){var t=e.inGroupIds.indexOf(n.groupId);e.inGroupIds.splice(t,1)})))}))}))},onGroupMemberRoleUpdate:function(e,t){var n=this,r=this.$route.params.groupId;(0,K.q9)(r,e.userId,t).then((function(r){if(!r.errCode){var o="GROUP_OWNER"==t?"组长":"组员";n.$message.success("成功设置为"+o),e.role=t}}))},isInGroup:function(e){var t=this;return e.inGroupIds.some((function(e){return e==t.groupId}))},fetchUsers:function(e){var t=this;this.userPageQuery.page=e?e-1:null,(0,H.yw)(this.userPageQuery).then((function(e){e.errCode||(t.userPageData.data=e.data.content,t.userPageData.number=e.data.number+1,t.userPageData.size=e.data.size,t.userPageData.totalPages=e.data.totalPages,t.userPageData.totalElements=e.data.totalElements)}))},onClickShowAddGroupMemberDrawer:function(){this.isShowAddGroupMemberDrawer=!0,this.fetchUsers()},onGroupMemberAdd:function(e,t){var n=this,r={userId:e,role:t},o=this.$route.params.groupId;(0,K.E2)(o,r).then((function(t){t.errCode||(n.$message.success("添加成功"),n.userPageData.data.filter((function(t){return t.id==e})).forEach((function(e){e.inGroupIds.push(n.groupId)})),n.fetchGroupMembers())}))},onUserPageSizeChange:function(e){e&&(this.userPageQuery.size=e,this.fetchUsers())},fetchGroupProjects:function(){var e=this;""==this.projectFilter.databaseType&&(this.projectFilter.databaseType=null),(0,Z.hW)(this.projectFilter).then((function(t){t.errCode||(e.projectPageData.data=t.data.content,e.projectPageData.number=t.data.number+1,e.projectPageData.size=t.data.size,e.projectPageData.totalPages=t.data.totalPages,e.projectPageData.totalElements=t.data.totalElements)}))},onProjectDatabaseTypeClear:function(){this.projectFilter.databaseType=null},onProjectQuery:function(){this.projectFilter.page=0,this.fetchGroupProjects()},onProjectListCurrentPageChange:function(e){e&&e-1!=this.projectFilter.page&&(this.projectFilter.page=e-1,this.fetchGroupProjects())},onProjectDelete:function(e){var t=this;this.$confirm("确认删除该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,Z.jI)(t.groupId,e).then((function(e){e.errCode||((0,X.z8)({showClose:!0,message:"删除成功",type:"success",duration:3e3}),t.onProjectQuery())}))}))},onAddProjectFavorite:function(e){var t=this;(0,te.a3)(e.id).then((function(n){n.errCode||(t.$message.success("关注成功"),e.isFavorite=!0)}))},onRemoveProjectFavorite:function(e){var t=this;(0,te.Ni)(e.id).then((function(n){n.errCode||(t.$message.success("取消成功"),e.isFavorite=!1)}))},toEditProject:function(e){var t=this;(0,Z.Rp)(e.id).then((function(e){t.projectForm=e.data,t.isShowProjectEditDialog=!0}))},toCreateProject:function(){var e=this.$route.params.groupId;this.projectForm={id:null,name:null,description:null,groupId:e,dataSource:{username:null,databaseType:null,databaseName:null,password:null,url:null,properties:[]},projectSyncRule:{isAutoSync:!1,autoSyncCron:null,ignoreTableNameRegexes:[],ignoreColumnNameRegexes:[]}},this.isShowProjectEditDialog=!0},toDocumentPage:function(e){var t=this.$route.params.groupId,n=e.id;this.$router.push({path:"/groups/"+t+"/projects/"+n+"/documents",query:{projectName:e.name}})},databaseTypeIcon:function(e){var t=this.databaseTypes.find((function(t){return t.databaseType==e.databaseType}));return t?t.icon:null},fetchProjectOperationLogs:function(e){var t=this;this.projectOperationLogPageQuery.page=e?e-1:null,(0,J.v)(this.projectOperationLogPageQuery).then((function(e){e.errCode||(t.projectOperationLogPageData.data=e.data.content,t.projectOperationLogPageData.number=e.data.number+1,t.projectOperationLogPageData.size=e.data.size,t.projectOperationLogPageData.totalPages=e.data.totalPages,t.projectOperationLogPageData.totalElements=e.data.totalElements)}))},onProjectOperationLogCurrentPageChange:function(e){e&&this.fetchProjectOperationLogs(e)},toProjectOperationLogDrawer:function(e){this.projectOperationLogPageQuery.involveProjectId=e.id,this.onProjectOperationLogCurrentPageChange(1),this.isShowProjectOperationLogDrawer=!0},onProjectFormSave:function(){var e=this;this.$refs.projectFormRulesRef.validate((function(t){return t?e.projectForm.id||e.projectForm.dataSource.password?void(0,Z.Iu)(e.projectForm).then((function(t){return t.errCode||(e.$message.success("保存成功"),e.fetchGroupProjects(),e.isShowProjectEditDialog=!1),!0})):(e.$message.error("请填写数据库连接密码"),!1):(e.$message.error("请填写表单必填项"),!1)}))},onProjectFormCancel:function(){this.isShowProjectEditDialog=!1},addDataSourceProperty:function(){this.projectForm.dataSource.properties.push({key:"",value:""})},removeDataSourceProperty:function(e){this.projectForm.dataSource.properties.splice(e,1)},addIgnoreTableName:function(){this.projectForm.projectSyncRule.ignoreTableNameRegexes.push("")},removeIgnoreTableName:function(e){this.projectForm.projectSyncRule.ignoreTableNameRegexes.splice(e,1)},addIgnoreColumnName:function(){this.projectForm.projectSyncRule.ignoreColumnNameRegexes.push("")},removeIgnoreColumnName:function(e){this.projectForm.projectSyncRule.ignoreColumnNameRegexes.splice(e,1)},sampleUrl:function(){var e=this,t=this.databaseTypes.find((function(t){return t.databaseType==e.projectForm.dataSource.databaseType}));return t&&0!=t.length?t.urlPattern.replace("{{jdbc.protocol}}",t.jdbcProtocol).replace("{{db.name}}",this.projectForm.dataSource.databaseName).replace("{{db.schema}}",this.projectForm.dataSource.schemaName).replace("{{db.url}}",this.projectForm.dataSource.url):""},onTestConnection:function(){var e=this;this.loading.testConnection=!0,this.$refs.projectFormRulesRef.validate((function(t){if(!t)return e.$message.error("请填写表单必填项"),e.loading.testConnection=!1,!1;if(!e.projectForm.id&&!e.projectForm.dataSource.password)return e.$message.error("请填写数据库连接密码"),e.loading.testConnection=!1,!1;var n={projectId:e.projectForm.id,databaseType:e.projectForm.dataSource.databaseType,databaseName:e.projectForm.dataSource.databaseName,schemaName:e.projectForm.dataSource.schemaName,username:e.projectForm.dataSource.username,password:e.projectForm.dataSource.password,url:e.projectForm.dataSource.url,properties:e.projectForm.dataSource.properties};(0,Z.M7)(n).then((function(t){t.errCode?(e.testConnectionState.success=!1,e.testConnectionState.buttonType="danger"):(e.testConnectionState.success=!0,e.testConnectionState.buttonType="success",e.$message.success("连接成功")),e.testConnectionState.isTest=!0,e.testConnectionState.message=t.errMessage})).catch((function(t){console.log(t),e.$message.error("连接超时请稍后再试"),e.testConnectionState.message="连接超时请稍后再试",e.testConnectionState.buttonType="danger",e.testConnectionState.success=!1})).finally((function(){return e.loading.testConnection=!1}))}))}}},re=n(83744);const oe=(0,re.Z)(ne,[["render",Y]]);var ae=oe}}]);
//# sourceMappingURL=903-legacy.b2b5f15d.js.map