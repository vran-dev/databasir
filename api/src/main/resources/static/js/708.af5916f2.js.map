{"version":3,"file":"js/708.af5916f2.js","mappings":"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","sources":["webpack://databasir/./src/api/Const.js","webpack://databasir/./src/api/DocumentTemplate.js","webpack://databasir/./src/views/SysDocumentTemplateProperty.vue","webpack://databasir/./src/views/SysDocumentTemplateProperty.vue?fd37"],"sourcesContent":["export const databaseTypes = ['mysql', 'postgresql']\r\n\r\nexport const documentTemplatePropertiesKey = \"document_template_properties\"","import axios from '@/utils/fetch';\r\n\r\nconst base = '/api/v1.0'\r\n\r\nexport const listProperties = () => {\r\n    return axios.get(base + '/document_template/properties')\r\n}\r\n\r\nexport const updateProperties = (body) => {\r\n    return axios.patch(base + '/document_template/properties', body)\r\n}\r\n","<template>\r\n    <el-row>\r\n        <el-col>\r\n            <el-switch\r\n                v-model=\"showSampleData\"\r\n                size=\"large\"\r\n                active-text=\"展示示例数据\"\r\n                inactive-text=\"隐藏示例数据\"\r\n                @change=\"onSwitchShowSampleData\"\r\n            />\r\n        </el-col>\r\n    </el-row>\r\n    <el-row>\r\n        <el-col>\r\n            <div class=\"h3\">Columns</div>\r\n        </el-col>\r\n        <el-col>\r\n            <el-table border :data=\"sampleData.columns\" highlight-current-row>\r\n                <el-table-column :label=\"item.key\" v-for=\"item in template.columnFieldNameProperties\" :key=\"item.key\" :prop=\"item.key\">\r\n                    <template #header>\r\n                        <el-input v-model=\"item.value\" :placeholder=\"item.key\" @change=\"saveColumnProperties()\"/>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-col>\r\n    </el-row>\r\n\r\n    <el-row>\r\n        <el-col>\r\n            <div class=\"h3\">Indexes</div>\r\n        </el-col>\r\n        <el-col>\r\n            <el-table border :data=\"sampleData.indexes\">\r\n                <el-table-column :label=\"item.key\" v-for=\"item in template.indexFieldNameProperties\" :key=\"item.key\" :prop=\"item.key\">\r\n                    <template #header>\r\n                        <el-input v-model=\"item.value\" :placeholder=\"item.key\" @change=\"saveIndexProperties()\"/>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-col>\r\n    </el-row>\r\n\r\n    <el-row>\r\n        <el-col>\r\n            <div class=\"h3\">Foreign Keys</div>\r\n        </el-col>\r\n        <el-col>\r\n            <el-table border :data=\"sampleData.foreignKeys\">\r\n                <el-table-column :label=\"item.key\" v-for=\"item in template.foreignKeyFieldNameProperties\" :key=\"item.key\" :prop=\"item.key\">\r\n                    <template #header>\r\n                        <el-input v-model=\"item.value\" :placeholder=\"item.key\" @change=\"saveForeignKeyProperties()\"/>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-col>\r\n    </el-row>\r\n\r\n    <el-row>\r\n        <el-col>\r\n            <div class=\"h3\">Trigger</div>\r\n        </el-col>\r\n        <el-col>\r\n            <el-table border :data=\"sampleData.triggers\">\r\n                <el-table-column :label=\"item.key\" v-for=\"item in template.triggerFieldNameProperties\" :key=\"item.key\" :prop=\"item.key\">\r\n                    <template #header>\r\n                        <el-input v-model=\"item.value\" :placeholder=\"item.key\" @change=\"saveTriggerProperties()\"/>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<style>\r\n.el-row {\r\n    margin-bottom: 12px;\r\n}\r\n.el-input input {\r\n    border: none;\r\n}\r\n</style>\r\n<script>\r\nimport { listProperties, updateProperties } from '../api/DocumentTemplate'\r\nimport { documentTemplatePropertiesKey } from '../api/Const'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            template: {\r\n                columnFieldNameProperties:[],\r\n                foreignKeyFieldNameProperties:[],\r\n                indexFieldNameProperties:[],\r\n                triggerFieldNameProperties:[]\r\n            },\r\n\r\n            sampleData: {\r\n                columns: [],\r\n                indexes: [],\r\n                foreignKeys: [],\r\n                triggers: []\r\n            },\r\n            showSampleData: false,\r\n        }\r\n    },\r\n    watch: {\r\n\r\n    },\r\n    created() {\r\n        this.fetchDocumentTemplateProperties()\r\n    },\r\n    methods: {\r\n        fetchDocumentTemplateProperties() {\r\n            listProperties().then(resp => {\r\n                if(!resp.errCode) {\r\n                    this.template = resp.data\r\n                }\r\n            })\r\n        },\r\n        clearPropertyCache() {\r\n            sessionStorage.removeItem(documentTemplatePropertiesKey)\r\n        },\r\n        saveColumnProperties() {\r\n            const body = {\r\n                type: \"COLUMN_FIELD_NAME\",\r\n                properties: this.template.columnFieldNameProperties,\r\n            }\r\n            updateProperties(body).then(resp => {\r\n                if (!resp.errCode) {\r\n                    this.$message.success('保存成功')\r\n                    this.clearPropertyCache()\r\n                }\r\n            })\r\n        },\r\n        saveIndexProperties() {\r\n            const body = {\r\n                type: \"INDEX_FIELD_NAME\",\r\n                properties: this.template.indexFieldNameProperties,\r\n            }\r\n            updateProperties(body).then(resp => {\r\n                if (!resp.errCode) {\r\n                    this.$message.success('保存成功')\r\n                    this.clearPropertyCache()\r\n                }\r\n            })\r\n        },\r\n        saveTriggerProperties() {\r\n            const body = {\r\n                type: \"TRIGGER_FIELD_NAME\",\r\n                properties: this.template.triggerFieldNameProperties,\r\n            }\r\n            updateProperties(body).then(resp => {\r\n                if (!resp.errCode) {\r\n                    this.$message.success('保存成功')\r\n                    this.clearPropertyCache()\r\n                }\r\n            })\r\n        },\r\n        saveForeignKeyProperties() {\r\n            const body = {\r\n                type: \"FOREIGN_KEY_FIELD_NAME\",\r\n                properties: this.template.foreignKeyFieldNameProperties,\r\n            }\r\n            updateProperties(body).then(resp => {\r\n                if (!resp.errCode) {\r\n                    this.$message.success('保存成功')\r\n                    this.clearPropertyCache()\r\n                }\r\n            })\r\n        },\r\n        onSwitchShowSampleData(isShow) {\r\n            if (isShow) {\r\n                const columnJsonData = '[{\"id\":409,\"name\":\"id\",\"type\":\"INT\",\"size\":10,\"decimalDigits\":1,\"comment\":\"id comment\",\"description\":\"this is id\",\"isPrimaryKey\":true,\"nullable\":\"NO\",\"autoIncrement\":\"YES\",\"defaultValue\":\"1\",\"discussionCount\":null,\"createAt\":\"2022-04-10 13:45:06\"},{\"id\":410,\"name\":\"email\",\"type\":\"VARCHAR\",\"size\":512,\"decimalDigits\":null,\"comment\":\"\",\"description\":null,\"isPrimaryKey\":false,\"nullable\":\"NO\",\"autoIncrement\":\"NO\",\"defaultValue\":null,\"discussionCount\":null,\"createAt\":\"2022-04-10 13:45:06\"},{\"id\":411,\"name\":\"username\",\"type\":\"VARCHAR\",\"size\":128,\"decimalDigits\":null,\"comment\":\"\",\"description\":null,\"isPrimaryKey\":false,\"nullable\":\"NO\",\"autoIncrement\":\"NO\",\"defaultValue\":null,\"discussionCount\":null,\"createAt\":\"2022-04-10 13:45:06\"},{\"id\":412,\"name\":\"password\",\"type\":\"TEXT\",\"size\":65535,\"decimalDigits\":null,\"comment\":\"\",\"description\":null,\"isPrimaryKey\":false,\"nullable\":\"NO\",\"autoIncrement\":\"NO\",\"defaultValue\":null,\"discussionCount\":null,\"createAt\":\"2022-04-10 13:45:06\"}]'\r\n                this.sampleData.columns = JSON.parse(columnJsonData)\r\n                const indexJsonData = '[{\"id\":96,\"name\":\"uk_email\",\"isUnique\":true,\"columnNames\":[\"email\",\"deleted_token\"],\"createAt\":\"2022-04-10 13:45:06\"},{\"id\":97,\"name\":\"uk_username\",\"isUnique\":true,\"columnNames\":[\"username\",\"deleted_token\"],\"createAt\":\"2022-04-10 13:45:06\"},{\"id\":98,\"name\":\"PRIMARY\",\"isUnique\":true,\"columnNames\":[\"id\"],\"createAt\":\"2022-04-10 13:45:06\"}]'\r\n                this.sampleData.indexes = JSON.parse(indexJsonData)\r\n                const foreignKeyJsonData = '[{\"fkName\":\"dept_manager_ibfk_2\",\"fkTableName\":\"dept_manager\",\"fkColumnName\":\"dept_no\",\"pkName\":\"PRIMARY\",\"pkTableName\":\"departments\",\"pkColumnName\":\"dept_no\",\"updateRule\":\"CASCADE\",\"deleteRule\":\"CASCADE\"},{\"fkName\":\"dept_manager_ibfk_1\",\"fkTableName\":\"dept_manager\",\"fkColumnName\":\"emp_no\",\"pkName\":\"PRIMARY\",\"pkTableName\":\"employees\",\"pkColumnName\":\"emp_no\",\"updateRule\":\"CASCADE\",\"deleteRule\":\"CASCADE\"}]'\r\n                this.sampleData.foreignKeys = JSON.parse(foreignKeyJsonData)\r\n                const triggerJsonData = '[{\"id\":1,\"name\":\"custom trigger\",\"timing\":\"before\",\"manipulation\":\"insert\",\"statement\":\"sql\",\"triggerCreateAt\":\"1970-01-01 00:00:00\"}]'\r\n                this.sampleData.triggers = JSON.parse(triggerJsonData)\r\n            } else {\r\n                this.sampleData.columns = []\r\n                this.sampleData.indexes = []\r\n                this.sampleData.foreignKeys = []\r\n                this.triggers = []\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./SysDocumentTemplateProperty.vue?vue&type=template&id=b4d940a4\"\nimport script from \"./SysDocumentTemplateProperty.vue?vue&type=script&lang=js\"\nexport * from \"./SysDocumentTemplateProperty.vue?vue&type=script&lang=js\"\n\nimport \"./SysDocumentTemplateProperty.vue?vue&type=style&index=0&id=b4d940a4&lang=css\"\n\nimport exportComponent from \"E:\\\\git_workspace\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["documentTemplatePropertiesKey","base","listProperties","axios","updateProperties","body","_createElementVNode","class","_createVNode","_component_el_row","_component_el_col","_component_el_switch","$data","$event","size","onChange","$options","_hoisted_1","_component_el_table","border","data","columns","_createElementBlock","_Fragment","_renderList","columnFieldNameProperties","item","_createBlock","_component_el_table_column","label","key","prop","header","_component_el_input","value","placeholder","_hoisted_2","indexes","indexFieldNameProperties","_hoisted_3","foreignKeys","foreignKeyFieldNameProperties","_hoisted_4","triggers","triggerFieldNameProperties","template","sampleData","showSampleData","watch","created","this","fetchDocumentTemplateProperties","methods","then","resp","errCode","clearPropertyCache","sessionStorage","removeItem","saveColumnProperties","type","properties","$message","success","saveIndexProperties","saveTriggerProperties","saveForeignKeyProperties","onSwitchShowSampleData","isShow","columnJsonData","JSON","parse","indexJsonData","foreignKeyJsonData","triggerJsonData","__exports__","render"],"sourceRoot":""}