"use strict";(self["webpackChunkdatabasir"]=self["webpackChunkdatabasir"]||[]).push([[968],{89968:function(e,l,t){t.r(l),t.d(l,{default:function(){return S}});var a=t(66252);const o=(0,a.Uk)(" 系统邮箱设置 "),r=(0,a.Uk)(" : "),u=(0,a.Uk)("保存"),m=(0,a.Uk)("重置");function s(e,l,t,s,d,n){const p=(0,a.up)("box"),i=(0,a.up)("el-icon"),f=(0,a.up)("el-divider"),c=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),w=(0,a.up)("el-col"),S=(0,a.up)("el-switch"),V=(0,a.up)("el-button"),W=(0,a.up)("el-form"),_=(0,a.up)("el-card"),b=(0,a.up)("el-main"),g=(0,a.up)("el-container");return(0,a.wg)(),(0,a.j4)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{shadow:"hover",style:{"max-width":"600px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1}),o])),_:1}),(0,a.Wm)(W,{model:d.form,"label-position":"top",rules:d.formRule,ref:"formRef",style:{"max-width":"900px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"SMTP 用户名",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.username,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.username=e),placeholder:"请输入 SMTP 服务用户名"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"SMTP 密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"发送邮箱",prop:"mailFrom"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.mailFrom,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.mailFrom=e),placeholder:"请输入邮箱账号"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"SMTP",prop:"smtpHost"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{span:12},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.smtpHost,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.smtpHost=e),placeholder:"SMTP Host"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{span:1,style:{"text-align":"center"}},{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Wm)(w,{span:6},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.smtpPort,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.smtpPort=e),placeholder:"SMTP Port"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(h,{label:"启用 SSL",prop:"useSSL"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{modelValue:d.form.useSSL,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.useSSL=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{style:{"margin-top":"38px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{type:"primary",onClick:l[6]||(l[6]=e=>n.onSubmit("formRef"))},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(V,{type:"danger",onClick:l[7]||(l[7]=e=>n.onReset())},{default:(0,a.w5)((()=>[m])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}var d=t(63872);const n="/api/v1.0/settings",p=()=>d.Z.get(n+"/sys_email"),i=e=>d.Z.post(n+"/sys_email",e),f=()=>d.Z["delete"](n+"/sys_email");var c={data(){return{form:{smtpHost:null,smtpPort:null,username:null,mailFrom:null,password:null,useSSL:!1},formRule:{username:[this.requiredInputValidRule("请输入 SMTP 服务用户名")],password:[this.requiredInputValidRule("请输入 SMTP 服务密码")],smtpHost:[this.requiredInputValidRule("请输入 SMTP 地址")],smtpPort:[this.requiredInputValidRule("请输入 SMTP 端口"),{min:1,max:65535,message:"端口有效值为 1~65535",trigger:"blur"}]}}},mounted(){this.fetchSysMail()},methods:{requiredInputValidRule(e){return{required:!0,message:e,trigger:"blur"}},async fetchSysMail(){const e=await p().then((e=>e.data));e&&(this.form=e)},onSubmit(){this.$refs.formRef.validate((e=>e?(i(this.form).then((e=>{e.errCode||this.$message.success("更新成功")})),!0):(this.$message.error("请完善表单相关信息！"),!1)))},onReset(){this.$confirm("确认重置系统邮件吗？删除后数据将无法恢复","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f().then((e=>{e.errCode||(this.form={},this.$message.success("重置成功"))}))}))}}},h=t(83744);const w=(0,h.Z)(c,[["render",s]]);var S=w}}]);
//# sourceMappingURL=968.b4cc67bb.js.map