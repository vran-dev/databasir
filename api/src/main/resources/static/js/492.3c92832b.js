"use strict";(self["webpackChunkdatabasir"]=self["webpackChunkdatabasir"]||[]).push([[492],{4339:function(e,t,a){a.d(t,{b:function(){return l}});const l="document_template_properties"},6631:function(e,t,a){a.d(t,{D:function(){return r},z:function(){return s}});var l=a(3872);const n="/api/v1.0",r=()=>l.Z.get(n+"/document_template/properties"),s=e=>l.Z.patch(n+"/document_template/properties",e)},1492:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(6252);const n=(0,l._)("div",{class:"h3"},"Columns",-1),r=(0,l._)("div",{class:"h3"},"Indexes",-1),s=(0,l._)("div",{class:"h3"},"Foreign Keys",-1),i=(0,l._)("div",{class:"h3"},"Trigger",-1);function o(e,t,a,o,u,m){const p=(0,l.up)("el-switch"),d=(0,l.up)("el-col"),c=(0,l.up)("el-row"),h=(0,l.up)("el-input"),g=(0,l.up)("el-table-column"),y=(0,l.up)("el-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:u.showSampleData,"onUpdate:modelValue":t[0]||(t[0]=e=>u.showSampleData=e),size:"large","active-text":"展示示例数据","inactive-text":"隐藏示例数据",onChange:m.onSwitchShowSampleData},null,8,["modelValue","onChange"])])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{border:"",data:u.sampleData.columns,"highlight-current-row":""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.template.columnFieldNameProperties,(e=>((0,l.wg)(),(0,l.j4)(g,{label:e.key,key:e.key,prop:e.key},{header:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:e.key,onChange:t[1]||(t[1]=e=>m.saveColumnProperties()),"input-style":u.inputStyle},null,8,["modelValue","onUpdate:modelValue","placeholder","input-style"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{border:"",data:u.sampleData.indexes},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.template.indexFieldNameProperties,(e=>((0,l.wg)(),(0,l.j4)(g,{label:e.key,key:e.key,prop:e.key},{header:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:e.key,onChange:t[2]||(t[2]=e=>m.saveIndexProperties()),"input-style":u.inputStyle},null,8,["modelValue","onUpdate:modelValue","placeholder","input-style"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[s])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{border:"",data:u.sampleData.foreignKeys},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.template.foreignKeyFieldNameProperties,(e=>((0,l.wg)(),(0,l.j4)(g,{label:e.key,key:e.key,prop:e.key},{header:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:e.key,onChange:t[3]||(t[3]=e=>m.saveForeignKeyProperties()),"input-style":u.inputStyle},null,8,["modelValue","onUpdate:modelValue","placeholder","input-style"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{border:"",data:u.sampleData.triggers},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.template.triggerFieldNameProperties,(e=>((0,l.wg)(),(0,l.j4)(g,{label:e.key,key:e.key,prop:e.key},{header:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:e.key,onChange:t[4]||(t[4]=e=>m.saveTriggerProperties()),"input-style":u.inputStyle},null,8,["modelValue","onUpdate:modelValue","placeholder","input-style"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])])),_:1})])),_:1})],64)}var u=a(6631),m=a(4339),p={data(){return{template:{columnFieldNameProperties:[],foreignKeyFieldNameProperties:[],indexFieldNameProperties:[],triggerFieldNameProperties:[]},sampleData:{columns:[],indexes:[],foreignKeys:[],triggers:[]},showSampleData:!1,inputStyle:{border:"none"}}},watch:{},created(){this.fetchDocumentTemplateProperties()},methods:{fetchDocumentTemplateProperties(){(0,u.D)().then((e=>{e.errCode||(this.template=e.data)}))},clearPropertyCache(){sessionStorage.removeItem(m.b)},saveColumnProperties(){const e={type:"COLUMN_FIELD_NAME",properties:this.template.columnFieldNameProperties};(0,u.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveIndexProperties(){const e={type:"INDEX_FIELD_NAME",properties:this.template.indexFieldNameProperties};(0,u.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveTriggerProperties(){const e={type:"TRIGGER_FIELD_NAME",properties:this.template.triggerFieldNameProperties};(0,u.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},saveForeignKeyProperties(){const e={type:"FOREIGN_KEY_FIELD_NAME",properties:this.template.foreignKeyFieldNameProperties};(0,u.z)(e).then((e=>{e.errCode||(this.$message.success("保存成功"),this.clearPropertyCache())}))},onSwitchShowSampleData(e){if(e){const e='[{"id":409,"name":"id","type":"INT","size":10,"decimalDigits":1,"comment":"id comment","description":"this is id","isPrimaryKey":true,"nullable":"NO","autoIncrement":"YES","defaultValue":"1","discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":410,"name":"email","type":"VARCHAR","size":512,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":411,"name":"username","type":"VARCHAR","size":128,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"},{"id":412,"name":"password","type":"TEXT","size":65535,"decimalDigits":null,"comment":"","description":null,"isPrimaryKey":false,"nullable":"NO","autoIncrement":"NO","defaultValue":null,"discussionCount":null,"createAt":"2022-04-10 13:45:06"}]';this.sampleData.columns=JSON.parse(e);const t='[{"id":96,"name":"uk_email","isUnique":true,"columnNames":["email","deleted_token"],"createAt":"2022-04-10 13:45:06"},{"id":97,"name":"uk_username","isUnique":true,"columnNames":["username","deleted_token"],"createAt":"2022-04-10 13:45:06"},{"id":98,"name":"PRIMARY","isUnique":true,"columnNames":["id"],"createAt":"2022-04-10 13:45:06"}]';this.sampleData.indexes=JSON.parse(t);const a='[{"fkName":"dept_manager_ibfk_2","fkTableName":"dept_manager","fkColumnName":"dept_no","pkName":"PRIMARY","pkTableName":"departments","pkColumnName":"dept_no","updateRule":"CASCADE","deleteRule":"CASCADE"},{"fkName":"dept_manager_ibfk_1","fkTableName":"dept_manager","fkColumnName":"emp_no","pkName":"PRIMARY","pkTableName":"employees","pkColumnName":"emp_no","updateRule":"CASCADE","deleteRule":"CASCADE"}]';this.sampleData.foreignKeys=JSON.parse(a);const l='[{"id":1,"name":"custom trigger","timing":"before","manipulation":"insert","statement":"sql","triggerCreateAt":"1970-01-01 00:00:00"}]';this.sampleData.triggers=JSON.parse(l)}else this.sampleData.columns=[],this.sampleData.indexes=[],this.sampleData.foreignKeys=[],this.triggers=[]}}},d=a(3744);const c=(0,d.Z)(p,[["render",o]]);var h=c}}]);
//# sourceMappingURL=492.3c92832b.js.map