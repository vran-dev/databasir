{"version":3,"file":"js/351-legacy.189e8004.js","mappings":"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","sources":["webpack://databasir/./src/views/SysEmailEdit.vue","webpack://databasir/./src/api/System.js","webpack://databasir/./src/views/SysEmailEdit.vue?6c44"],"sourcesContent":["<template>\r\n    <el-container>\r\n        <el-main>\r\n            <el-card shadow=\"hover\" style=\"max-width: 600px\">\r\n                <el-divider>\r\n                    <el-icon><box /></el-icon> 系统邮箱设置\r\n                </el-divider>\r\n                <el-form :model=\"form\" label-position=\"top\" :rules=\"formRule\" ref=\"formRef\" style=\"max-width: 900px\">\r\n                    <el-form-item label=\"SMTP 用户名\"  prop=\"username\">\r\n                        <el-input v-model=\"form.username\" placeholder=\"请输入 SMTP 服务用户名\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"SMTP 密码\" prop=\"password\">\r\n                        <el-input\r\n                            v-model=\"form.password\"\r\n                            type=\"password\"\r\n                            placeholder=\"请输入密码\"\r\n                            show-password\r\n                        />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"发送邮箱\"  prop=\"mailFrom\">\r\n                        <el-input v-model=\"form.mailFrom\" placeholder=\"请输入邮箱账号\"></el-input>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"SMTP\" prop=\"smtpHost\">\r\n                        <el-col :span=\"12\">\r\n                            <el-input v-model=\"form.smtpHost\" placeholder=\"SMTP Host\"/>\r\n                        </el-col>\r\n                        <el-col :span=\"1\" style=\"text-align:center\">\r\n                            :\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <el-input v-model=\"form.smtpPort\" placeholder=\"SMTP Port\" />\r\n                        </el-col>\r\n                    </el-form-item>\r\n                    <el-form-item  label=\"启用 SSL\" prop=\"useSSL\">\r\n                        <el-switch\r\n                            v-model=\"form.useSSL\"\r\n                        />\r\n                    </el-form-item>\r\n                  <el-form-item  label=\"启用 TLS\" prop=\"useTls\">\r\n                    <el-switch\r\n                        v-model=\"form.useTls\"\r\n                    />\r\n                  </el-form-item>\r\n\r\n                    <el-form-item style=\"margin-top:38px\">\r\n                        <el-button type=\"primary\" @click=\"onSubmit('formRef')\">保存</el-button>\r\n                        <el-button type=\"danger\" @click=\"onReset()\">重置</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-card>\r\n        </el-main>\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { getEmailSetting, updateEmailSetting, deleteEmailSetting } from \"../api/System\"\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            form: {\r\n                smtpHost: null,\r\n                smtpPort: null,\r\n                username: null,\r\n                mailFrom: null,\r\n                password: null,\r\n                useSSL: false,\r\n                useTls: false,\r\n            },\r\n            formRule: {\r\n                username: [this.requiredInputValidRule('请输入 SMTP 服务用户名')],\r\n                password: [this.requiredInputValidRule('请输入 SMTP 服务密码')],\r\n                smtpHost: [this.requiredInputValidRule('请输入 SMTP 地址')],\r\n                smtpPort: [this.requiredInputValidRule('请输入 SMTP 端口'), { min: 1, max: 65535, message: '端口有效值为 1~65535', trigger: 'blur' }],\r\n            }\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.fetchSysMail()\r\n    },\r\n\r\n    methods: {\r\n        requiredInputValidRule(message) {\r\n            return {\r\n                required: true,\r\n                message: message,\r\n                trigger: 'blur',\r\n            }\r\n        },\r\n        async fetchSysMail() {\r\n            const data = await getEmailSetting().then(resp => resp.data)\r\n            if(data) {\r\n                this.form = data\r\n            }\r\n        },\r\n\r\n        onSubmit() {\r\n            this.$refs.formRef.validate((valid) => {\r\n                if(this.form.useTls && this.form.useSSL) {\r\n                  this.$message.error('不能同时启用 SSL 和 TLS')\r\n                  return false\r\n                }\r\n                if (valid) {\r\n                    updateEmailSetting(this.form).then(resp => {\r\n                        if (!resp.errCode) {\r\n                            this.$message.success('更新成功')\r\n                        }\r\n                    })\r\n                    return true\r\n                } else {\r\n                    this.$message.error('请完善表单相关信息！')\r\n                    return false\r\n                }\r\n            })\r\n\r\n        },\r\n        onReset() {\r\n            this.$confirm('确认重置系统邮件吗？删除后数据将无法恢复', '警告', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                deleteEmailSetting().then(resp => {\r\n                    if (!resp.errCode) {\r\n                        this.form = {}\r\n                        this.$message.success('重置成功')\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n</script>","import axios from '@/utils/fetch';\r\n\r\nconst base = '/api/v1.0/settings'\r\n\r\nexport const getEmailSetting = () => {\r\n    return axios.get(base+\"/sys_email\")\r\n}\r\n\r\nexport const updateEmailSetting = (request) => {\r\n    return axios.post(base+\"/sys_email\", request);\r\n}\r\n\r\nexport const deleteEmailSetting = () => {\r\n    return axios.delete(base+\"/sys_email\");\r\n}","import { render } from \"./SysEmailEdit.vue?vue&type=template&id=6c48ee9d\"\nimport script from \"./SysEmailEdit.vue?vue&type=script&lang=js\"\nexport * from \"./SysEmailEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\workspace\\\\github\\\\databasir\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_el_container","_createVNode","_component_el_main","_component_el_card","shadow","style","_component_el_divider","_component_el_icon","_component_box","_component_el_form","model","$data","rules","ref","_component_el_form_item","label","prop","_component_el_input","username","$event","placeholder","password","type","mailFrom","_component_el_col","span","smtpHost","smtpPort","_component_el_switch","useSSL","useTls","_component_el_button","onClick","$options","base","getEmailSetting","axios","updateEmailSetting","request","deleteEmailSetting","data","form","formRule","this","requiredInputValidRule","min","max","message","trigger","mounted","fetchSysMail","methods","required","then","resp","onSubmit","$refs","formRef","validate","valid","$message","error","errCode","success","onReset","$confirm","confirmButtonText","cancelButtonText","__exports__","render"],"sourceRoot":""}