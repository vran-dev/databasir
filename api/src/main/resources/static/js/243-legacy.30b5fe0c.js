"use strict";(self["webpackChunkdatabasir_frontend"]=self["webpackChunkdatabasir_frontend"]||[]).push([[243],{6243:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(6252),u=(0,n.Uk)(" : "),l=(0,n.Uk)("保存");function o(e,t,r,o,a,s){var m=(0,n.up)("el-input"),i=(0,n.up)("el-form-item"),f=(0,n.up)("el-col"),d=(0,n.up)("el-button"),p=(0,n.up)("el-form"),c=(0,n.up)("el-card"),w=(0,n.up)("el-main"),h=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(h,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(w,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{model:a.form,"label-position":"top",rules:a.formRule,ref:"formRef",style:{"max-width":"900px"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(i,{label:"邮箱账号",prop:"username"},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{modelValue:a.form.username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.form.username=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(i,{label:"邮箱密码",prop:"password"},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{modelValue:a.form.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.form.password=e}),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(i,{label:"SMTP",prop:"smtpHost"},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{modelValue:a.form.smtpHost,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.form.smtpHost=e}),placeholder:"SMTP Host"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(f,{span:1,style:{"text-align":"center"}},{default:(0,n.w5)((function(){return[u]})),_:1}),(0,n.Wm)(f,{span:6},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{modelValue:a.form.smtpPort,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.form.smtpPort=e}),placeholder:"SMTP Port"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,n.Wm)(i,{style:{"margin-top":"38px"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{type:"primary",onClick:t[4]||(t[4]=function(e){return s.onSubmit("formRef")})},{default:(0,n.w5)((function(){return[l]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:1})]})),_:1})]})),_:1})}var a=r(8534),s=(r(5666),r(3872)),m="/api/v1.0/settings",i=function(){return s.Z.get(m+"/sys_email")},f=function(e){return s.Z.post(m+"/sys_email",e)},d={data:function(){return{form:{smtpHost:null,smtpPort:null,username:null,password:null},formRule:{username:[this.requiredInputValidRule("请输入邮箱账号"),{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[this.requiredInputValidRule("请输入邮箱密码")],smtpHost:[this.requiredInputValidRule("请输入 SMTP 地址")],smtpPort:[this.requiredInputValidRule("请输入 SMTP 端口"),{min:1,max:65535,message:"端口有效值为 1~65535",trigger:"blur"}]}}},mounted:function(){this.fetchSysMail()},methods:{requiredInputValidRule:function(e){return{required:!0,message:e,trigger:"blur"}},fetchSysMail:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i().then((function(e){return e.data}));case 2:r=t.sent,r&&(e.form=r);case 4:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;this.$refs.formRef.validate((function(t){return t?(f(e.form).then((function(t){t.errCode||e.$message.success("更新成功")})),!0):(e.$message.error("请完善表单相关信息！"),!1)}))}}},p=r(3744);const c=(0,p.Z)(d,[["render",o]]);var w=c}}]);
//# sourceMappingURL=243-legacy.30b5fe0c.js.map