"use strict";(self["webpackChunkdatabasir_frontend"]=self["webpackChunkdatabasir_frontend"]||[]).push([[243],{6243:function(e,l,t){t.r(l),t.d(l,{default:function(){return w}});var r=t(6252);const a=(0,r.Uk)(" : "),s=(0,r.Uk)("保存");function u(e,l,t,u,o,m){const n=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),p=(0,r.up)("el-col"),i=(0,r.up)("el-button"),f=(0,r.up)("el-form"),w=(0,r.up)("el-card"),c=(0,r.up)("el-main"),h=(0,r.up)("el-container");return(0,r.wg)(),(0,r.j4)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{model:o.form,"label-position":"top",rules:o.formRule,ref:"formRef",style:{"max-width":"900px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"邮箱账号",prop:"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:o.form.username,"onUpdate:modelValue":l[0]||(l[0]=e=>o.form.username=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"邮箱密码",prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:o.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>o.form.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"SMTP",prop:"smtpHost"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{span:12},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:o.form.smtpHost,"onUpdate:modelValue":l[2]||(l[2]=e=>o.form.smtpHost=e),placeholder:"SMTP Host"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{span:1,style:{"text-align":"center"}},{default:(0,r.w5)((()=>[a])),_:1}),(0,r.Wm)(p,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:o.form.smtpPort,"onUpdate:modelValue":l[3]||(l[3]=e=>o.form.smtpPort=e),placeholder:"SMTP Port"},null,8,["modelValue"])])),_:1})])),_:1}),(0,r.Wm)(d,{style:{"margin-top":"38px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:l[4]||(l[4]=e=>m.onSubmit("formRef"))},{default:(0,r.w5)((()=>[s])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}var o=t(3872);const m="/api/v1.0/settings",n=()=>o.Z.get(m+"/sys_email"),d=e=>o.Z.post(m+"/sys_email",e);var p={data(){return{form:{smtpHost:null,smtpPort:null,username:null,password:null},formRule:{username:[this.requiredInputValidRule("请输入邮箱账号"),{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[this.requiredInputValidRule("请输入邮箱密码")],smtpHost:[this.requiredInputValidRule("请输入 SMTP 地址")],smtpPort:[this.requiredInputValidRule("请输入 SMTP 端口"),{min:1,max:65535,message:"端口有效值为 1~65535",trigger:"blur"}]}}},mounted(){this.fetchSysMail()},methods:{requiredInputValidRule(e){return{required:!0,message:e,trigger:"blur"}},async fetchSysMail(){const e=await n().then((e=>e.data));e&&(this.form=e)},onSubmit(){this.$refs.formRef.validate((e=>e?(d(this.form).then((e=>{e.errCode||this.$message.success("更新成功")})),!0):(this.$message.error("请完善表单相关信息！"),!1)))}}},i=t(3744);const f=(0,i.Z)(p,[["render",u]]);var w=f}}]);
//# sourceMappingURL=243.9a892caa.js.map