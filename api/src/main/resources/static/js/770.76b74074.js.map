{"version":3,"file":"js/770.76b74074.js","mappings":"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","sources":["webpack://databasir/./src/api/OAuthApp.js","webpack://databasir/./src/components/Oauth2AppType.vue","webpack://databasir/./src/components/Oauth2AppType.vue?024c","webpack://databasir/./src/views/Login.vue","webpack://databasir/./src/views/Login.vue?240b"],"sourcesContent":["import axios from '@/utils/fetch';\n\nconst base = '/oauth2'\n\nexport const listAll = () => {\n    return axios.get(base + \"/apps\")\n}\n\nexport const authorizationUrl = (id, params) => {\n    return axios.get(base + \"/authorization/\"+id, {\n        params: params\n    })\n}\n\nconst apiBase = \"/api/v1.0/oauth2_apps\"\n\nexport const pageList = (pageQuery) => {\n    return axios.get(apiBase , {\n        params: pageQuery\n    })\n}\n\nexport const deleteById = (id) => {\n    return axios.delete(apiBase+'/'+id)\n}\n\nexport const getById = (id) => {\n    return axios.get(apiBase+'/'+id)\n}\n\nexport const createApp = (body) => {\n    return axios.post(apiBase, body)\n}\n\nexport const updateApp = (body) => {\n    return axios.patch(apiBase, body)\n}\n\nexport const listPlatforms = () => {\n    return axios.get(apiBase +\"/platforms\")\n}","<template>\n    <template v-if=\"appType.toLowerCase() == 'github'\">\n        <el-tooltip :content=\"appName\" effect=\"light\">\n            <img :src=\"appIcon ? appIcon : require('@/assets/app/github.svg')\" style=\"max-width: 20px; max-height: 20px;\"/>\n        </el-tooltip>\n    </template>\n    <template v-else-if=\"appType.toLowerCase() == 'gitlab'\">\n        <el-tooltip :content=\"appName\"  effect=\"light\">\n            <img :src=\"appIcon ? appIcon : require('@/assets/app/gitlab.svg')\" style=\"max-width: 20px; max-height: 20px;\"/>\n        </el-tooltip>\n    </template>\n    <template v-else-if=\"appType.toLowerCase() == 'we_work'\">\n        <el-tooltip :content=\"appName\"  effect=\"light\">\n            <img :src=\"appIcon ? appIcon : require('@/assets/app/wework.svg')\" style=\"max-width: 20px; max-height: 20px;\"/>\n        </el-tooltip>\n    </template>\n    <template v-else>\n        {{ appType }}\n    </template>\n</template>\n\n\n<script>\nexport default {\n    props: {\n        appType: String,\n        appIcon: String,\n        appName: String\n    },\n}\n</script>\n","import { render } from \"./Oauth2AppType.vue?vue&type=template&id=34ca09b5\"\nimport script from \"./Oauth2AppType.vue?vue&type=script&lang=js\"\nexport * from \"./Oauth2AppType.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/vrtia/workspace/vran/databasir/databasir-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <el-container>\n        <el-header>\n        </el-header>\n        <el-main class=\"login-main\">\n            <div class=\"login-card\">\n                <el-form ref=\"formRef\" :rules=\"formRule\" :model=\"form\" style=\"border:none;\">\n                    <el-form-item>\n                        <el-link href=\"https://github.com/vran-dev/databasir\" target=\"_blank\" :underline=\"false\" type=\"info\">\n                            <h1>Databasir</h1>\n                        </el-link>\n                    </el-form-item>\n                    <el-form-item  prop=\"username\">\n                        <input type=\"text\" class=\"login-input\" placeholder=\"用户名或邮箱\" v-model=\"form.username\" @keyup.enter=\"onLogin('formRef')\">\n                    </el-form-item>\n                    <el-form-item prop=\"password\">\n                        <input type=\"password\" class=\"login-input\" placeholder=\"密码\" v-model=\"form.password\" @keyup.enter=\"onLogin('formRef')\" >\n                    </el-form-item>\n                    <el-form-item>\n                        <el-space :size=\"32\">\n                            <el-button style=\"width: 120px; margin-top:10px;border-color:#EEE;\" color=\"#000\" @click=\"onLogin('formRef')\" plain round >\n                                登录\n                            </el-button>\n                            <el-tooltip content=\"请联系管理员为您重置密码\">\n                                <el-link target=\"_blank\" :underline=\"false\" type=\"info\">\n                                忘记密码？\n                                </el-link>\n                            </el-tooltip>\n                        </el-space>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-divider content-position=\"right\" v-if=\"oauthApps.length > 0\">\n                            <el-space :size=\"26\">\n                                第三方登录\n                                <el-link v-for=\"(item, index) in oauthApps\" :key=\"index\" :underline=\"false\" @click=\"onAuthLogin(item.registrationId)\">\n                                    <oauth2-app-type :app-type=\"item.appType\" :app-icon=\"item.appIcon\" :app-name=\"item.appName\"/>\n                                </el-link>\n                            </el-space>\n                        </el-divider>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </el-main>\n    </el-container>\n</template>\n\n<style>\n.login-main {\n    margin: 0 auto;\n    margin-top: 200px;\n}\n\n.login-input {\n    border-width: 0 0 1px 0;\n    border-style: solid;\n    border-color:#ddd;\n    width: 100%;\n    min-height: 33px;\n}\n\n.login-input::placeholder {\n    color: rgba(180, 180, 180, 0.808);\n}\n\n.login-input:focus {\n    outline: none;\n    border-color: #000;\n}\n\n.login-card {\n    max-width: 600px;\n    min-width: 500px;\n    border-color: black;\n    /* border-style: solid; */\n}\n\n.app-icon {\n    --el-avatar-bg-color: transparent;\n}\n\n</style>\n<script>\nimport { login } from \"../api/Login\"\nimport { user } from \"../utils/auth\"\nimport { listAll, authorizationUrl } from \"../api/OAuthApp\"\nimport Oauth2AppType from '../components/Oauth2AppType.vue'\n\nexport default {\n    components: { Oauth2AppType },\n    data() {\n        return {\n            form: {\n                username: null,\n                password: null\n            },\n\n            formRule: {\n                username: [{required: true,message: '请输入用户名或邮箱',trigger: 'blur'}],\n                password: [{required: true,message: '请输入密码',trigger: 'blur'}],\n            },\n\n            oauthApps: []\n        }\n    },\n\n    created() {\n        this.fetchAllOAuthApps()\n    },\n\n    methods: {\n        resolveAppIcon(item) {\n            if (item.appIcon && item.appIcon != '') {\n                return item.appIcon\n            }\n            if ('github' == item.appType) {\n                return require('@/assets/app/github.svg')\n            } else if ('gitlab' == item.appType) {\n                return require('@/assets/app/gitlab.svg')\n            } else {\n                return ''\n            }\n        },\n        fetchAllOAuthApps() {\n            listAll().then(resp => {\n                if(!resp.errCode) {\n                    this.oauthApps = resp.data\n                }\n            })\n        },\n        toIndexPage() {\n            this.$router.push({path: '/groups'})\n        },\n\n        onAuthLogin(id) {\n            const protocol = window.location.protocol\n            const redirectUri = protocol + \"//\" + window.location.host + \"/login/oauth2/\" + id\n            const params = {\n                redirect_uri: redirectUri\n            }\n            authorizationUrl(id, params).then(resp => {\n                if (!resp.errCode) {\n                    window.location.href = resp.data\n                }\n            })\n        },\n\n        onLogin() {\n             this.$refs.formRef.validate(valid => {\n                 if (valid) {\n                    login(this.form).then(resp => {\n                        if (!resp.errCode) {\n                            user.saveUserLoginData(resp.data)\n                            this.$store.commit('userUpdate', {\n                                nickname: resp.data.nickname,\n                                username: resp.data.username,\n                                email: resp.data.email,\n                            })\n                            this.toIndexPage()\n                        }\n                    })\n                 }\n             })\n        }\n    }\n}\n</script>","import { render } from \"./Login.vue?vue&type=template&id=a9b1c70c\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=a9b1c70c&lang=css\"\n\nimport exportComponent from \"/Users/vrtia/workspace/vran/databasir/databasir-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["base","listAll","axios","authorizationUrl","id","params","apiBase","pageList","pageQuery","deleteById","getById","createApp","body","updateApp","listPlatforms","$props","toLowerCase","_createBlock","_component_el_tooltip","content","effect","_createElementVNode","src","require","style","_createElementBlock","_Fragment","key","props","appType","String","appIcon","appName","__exports__","render","class","_component_el_container","_createVNode","_component_el_header","_component_el_main","_component_el_form","ref","rules","$data","model","_component_el_form_item","_component_el_link","href","target","underline","type","_hoisted_2","prop","placeholder","username","$event","onKeyup","$options","password","_component_el_space","size","_component_el_button","color","onClick","plain","round","length","_component_el_divider","_renderList","item","index","registrationId","_component_oauth2_app_type","components","Oauth2AppType","data","form","formRule","required","message","trigger","oauthApps","created","this","fetchAllOAuthApps","methods","resolveAppIcon","then","resp","errCode","toIndexPage","$router","push","path","onAuthLogin","protocol","window","location","redirectUri","host","redirect_uri","onLogin","$refs","formRef","validate","valid","login","user","$store","commit","nickname","email"],"sourceRoot":""}