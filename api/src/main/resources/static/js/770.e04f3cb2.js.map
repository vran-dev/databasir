{"version":3,"file":"js/770.e04f3cb2.js","mappings":"kTAEA,MAAMA,EAAO,UAEAC,EAAU,IACZC,EAAAA,EAAAA,IAAUF,EAAO,SAGfG,EAAmB,CAACC,EAAIC,IAC1BH,EAAAA,EAAAA,IAAUF,EAAO,kBAAkBI,EAAI,CAC1CC,OAAQA,IAIVC,EAAU,wBAEHC,EAAYC,GACdN,EAAAA,EAAAA,IAAUI,EAAU,CACvBD,OAAQG,IAIHC,EAAcL,GAChBF,EAAAA,EAAAA,UAAaI,EAAQ,IAAIF,GAGvBM,EAAWN,GACbF,EAAAA,EAAAA,IAAUI,EAAQ,IAAIF,GAGpBO,EAAaC,GACfV,EAAAA,EAAAA,KAAWI,EAASM,GAGlBC,EAAaD,GACfV,EAAAA,EAAAA,MAAYI,EAASM,I,qKClCO,UAAnBE,EAAAA,QAAQC,gBAAW,WAC/BC,EAAAA,EAAAA,IAEaC,EAAA,C,MAFAC,QAASJ,EAAAA,QAASK,OAAO,SAAtC,C,kBACI,IAA+G,EAA/GC,EAAAA,EAAAA,GAA+G,OAAzGC,IAAKP,EAAAA,QAAUA,EAAAA,QAAUQ,EAAQ,OAA4BC,MAAA,0CAAnE,a,KADJ,gBAIoC,UAAnBT,EAAAA,QAAQC,gBAAW,WACpCC,EAAAA,EAAAA,IAEaC,EAAA,C,MAFAC,QAASJ,EAAAA,QAAUK,OAAO,SAAvC,C,kBACI,IAA+G,EAA/GC,EAAAA,EAAAA,GAA+G,OAAzGC,IAAKP,EAAAA,QAAUA,EAAAA,QAAUQ,EAAQ,OAA4BC,MAAA,0CAAnE,a,KADJ,6BAIJC,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,CAAAC,IAAAA,GAAA,mBADJZ,EAAAA,SAAO,IADd,KAOJ,OACIa,MAAO,CACHC,QAASC,OACTC,QAASD,OACTE,QAASF,S,WCjBjB,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,S,sGCFiBC,MAAM,c,GAIKd,EAAAA,EAAAA,GAAkB,UAAd,aAAS,G,WAW6G,Q,WAI9D,W,WAQvC,W,+TA/B7CJ,EAAAA,EAAAA,IA0CemB,EAAA,M,kBAzCX,IACY,EADZC,EAAAA,EAAAA,IACYC,IACZD,EAAAA,EAAAA,IAsCUE,EAAA,CAtCDJ,MAAM,cAAY,C,kBACvB,IAoCM,EApCNd,EAAAA,EAAAA,GAoCM,MApCN,EAoCM,EAnCFgB,EAAAA,EAAAA,IAkCUG,EAAA,CAlCDC,IAAI,UAAWC,MAAOC,EAAAA,SAAWC,MAAOD,EAAAA,KAAMnB,MAAA,iBAAvD,C,kBACI,IAIe,EAJfa,EAAAA,EAAAA,IAIeQ,EAAA,M,kBAHX,IAEU,EAFVR,EAAAA,EAAAA,IAEUS,EAAA,CAFDC,KAAK,wCAAwCC,OAAO,SAAUC,WAAW,EAAOC,KAAK,QAA9F,C,kBACI,IAAkB,CAAlBC,K,gBAGRd,EAAAA,EAAAA,IAEeQ,EAAA,CAFAO,KAAK,YAAU,C,kBAC1B,IAAsH,WAAtH/B,EAAAA,EAAAA,GAAsH,SAA/G6B,KAAK,OAAOf,MAAM,cAAckB,YAAY,S,qCAAkBV,EAAAA,KAAKW,SAAQC,GAAGC,QAAK,yBAAQC,EAAAA,QAAO,yBAAzG,iBAAqEd,EAAAA,KAAKW,e,OAE9EjB,EAAAA,EAAAA,IAEeQ,EAAA,CAFDO,KAAK,YAAU,C,kBACzB,IAAuH,WAAvH/B,EAAAA,EAAAA,GAAuH,SAAhH6B,KAAK,WAAWf,MAAM,cAAckB,YAAY,K,qCAAcV,EAAAA,KAAKe,SAAQH,GAAGC,QAAK,yBAAQC,EAAAA,QAAO,yBAAzG,iBAAqEd,EAAAA,KAAKe,e,OAE9ErB,EAAAA,EAAAA,IAWeQ,EAAA,M,kBAVX,IASW,EATXR,EAAAA,EAAAA,IASWsB,EAAA,CATAC,KAAM,IAAE,C,kBACf,IAEY,EAFZvB,EAAAA,EAAAA,IAEYwB,EAAA,CAFDrC,MAAA,0DAAyDsC,MAAM,OAAQC,QAAK,eAAEN,EAAAA,QAAO,YAAaO,MAAA,GAAMC,MAAA,IAAnH,C,kBAA0H,IAE1H,M,OACA5B,EAAAA,EAAAA,IAIanB,EAAA,CAJDC,QAAQ,gBAAc,C,kBAC9B,IAEU,EAFVkB,EAAAA,EAAAA,IAEUS,EAAA,CAFDE,OAAO,SAAUC,WAAW,EAAOC,KAAK,QAAjD,C,kBAAwD,IAExD,M,kCAIZb,EAAAA,EAAAA,IASeQ,EAAA,M,kBARX,IAOa,CAP8BF,EAAAA,UAAUuB,OAAM,eAA3DjD,EAAAA,EAAAA,IAOakD,EAAA,C,MAPD,mBAAiB,SAA7B,C,kBACI,IAKW,EALX9B,EAAAA,EAAAA,IAKWsB,EAAA,CALAC,KAAM,IAAE,C,kBAAE,IAEjB,0BAEUlC,EAAAA,GAAA,MAAA0C,EAAAA,EAAAA,IAFuBzB,EAAAA,WAAS,CAAzB0B,EAAMC,M,WAAvBrD,EAAAA,EAAAA,IAEU6B,EAAA,CAFmCnB,IAAK2C,EAAQrB,WAAW,EAAQc,QAAK,GAAEN,EAAAA,YAAYY,EAAKE,iBAArG,C,kBACI,IAA6F,EAA7FlC,EAAAA,EAAAA,IAA6FmC,EAAA,CAA3E,WAAUH,EAAKxC,QAAU,WAAUwC,EAAKtC,QAAU,WAAUsC,EAAKrC,SAAnF,8C,KADJ,8B,iBAHR,kB,cAzBR,0B,8DAiFhB,GACIyC,WAAY,CAAEC,cAAaA,EAAAA,GAC3BC,OACI,MAAO,CACHC,KAAM,CACFtB,SAAU,KACVI,SAAU,MAGdmB,SAAU,CACNvB,SAAU,CAAC,CAACwB,UAAU,EAAKC,QAAS,YAAYC,QAAS,SACzDtB,SAAU,CAAC,CAACoB,UAAU,EAAKC,QAAS,QAAQC,QAAS,UAGzDC,UAAW,KAInBC,UACIC,KAAKC,qBAGTC,QAAS,CACLC,eAAejB,GACX,OAAIA,EAAKtC,SAA2B,IAAhBsC,EAAKtC,QACdsC,EAAKtC,QAEZ,UAAYsC,EAAKxC,QACVN,EAAQ,OACR,UAAY8C,EAAKxC,QACjBN,EAAQ,OAER,IAGf6D,qBACIlF,EAAAA,EAAAA,MAAUqF,MAAKC,IACPA,EAAKC,UACLN,KAAKF,UAAYO,EAAKb,UAIlCe,cACIP,KAAKQ,QAAQC,KAAK,CAACC,KAAM,aAG7BC,YAAYzF,GACR,MAAM0F,EAAWC,OAAOC,SAASF,SAC3BG,EAAcH,EAAW,KAAOC,OAAOC,SAASE,KAAO,iBAAmB9F,EAC1EC,EAAS,CACX8F,aAAcF,IAElB9F,EAAAA,EAAAA,IAAiBC,EAAIC,GAAQiF,MAAKC,IACzBA,EAAKC,UACNO,OAAOC,SAASlD,KAAOyC,EAAKb,UAKxC0B,UACKlB,KAAKmB,MAAMC,QAAQC,UAASC,IACpBA,IACDC,EAAAA,EAAAA,IAAMvB,KAAKP,MAAMW,MAAKC,IACbA,EAAKC,UACNkB,EAAAA,EAAAA,kBAAuBnB,EAAKb,MAC5BQ,KAAKyB,OAAOC,OAAO,aAAc,CAC7BC,SAAUtB,EAAKb,KAAKmC,SACpBxD,SAAUkC,EAAKb,KAAKrB,SACpByD,MAAOvB,EAAKb,KAAKoC,QAErB5B,KAAKO,wB,WCtJjC,MAAMzD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,S","sources":["webpack://databasir/./src/api/OAuthApp.js","webpack://databasir/./src/components/Oauth2AppType.vue","webpack://databasir/./src/components/Oauth2AppType.vue?024c","webpack://databasir/./src/views/Login.vue","webpack://databasir/./src/views/Login.vue?240b"],"sourcesContent":["import axios from '@/utils/fetch';\r\n\r\nconst base = '/oauth2'\r\n\r\nexport const listAll = () => {\r\n    return axios.get(base + \"/apps\")\r\n}\r\n\r\nexport const authorizationUrl = (id, params) => {\r\n    return axios.get(base + \"/authorization/\"+id, {\r\n        params: params\r\n    })\r\n}\r\n\r\nconst apiBase = \"/api/v1.0/oauth2_apps\"\r\n\r\nexport const pageList = (pageQuery) => {\r\n    return axios.get(apiBase , {\r\n        params: pageQuery\r\n    })\r\n}\r\n\r\nexport const deleteById = (id) => {\r\n    return axios.delete(apiBase+'/'+id)\r\n}\r\n\r\nexport const getById = (id) => {\r\n    return axios.get(apiBase+'/'+id)\r\n}\r\n\r\nexport const createApp = (body) => {\r\n    return axios.post(apiBase, body)\r\n}\r\n\r\nexport const updateApp = (body) => {\r\n    return axios.patch(apiBase, body)\r\n}","<template>\r\n    <template v-if=\"appType.toLowerCase() == 'github'\">\r\n        <el-tooltip :content=\"appName\" effect=\"light\">\r\n            <img :src=\"appIcon ? appIcon : require('@/assets/app/github.svg')\" style=\"max-width: 20px; max-height: 20px;\"/>\r\n        </el-tooltip>\r\n    </template>\r\n    <template v-else-if=\"appType.toLowerCase() == 'gitlab'\">\r\n        <el-tooltip :content=\"appName\"  effect=\"light\">\r\n            <img :src=\"appIcon ? appIcon : require('@/assets/app/gitlab.svg')\" style=\"max-width: 20px; max-height: 20px;\"/>\r\n        </el-tooltip>\r\n    </template>\r\n    <template v-else>\r\n        {{ appType }}\r\n    </template>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        appType: String,\r\n        appIcon: String,\r\n        appName: String\r\n    },\r\n}\r\n</script>\r\n","import { render } from \"./Oauth2AppType.vue?vue&type=template&id=1d0c4852\"\nimport script from \"./Oauth2AppType.vue?vue&type=script&lang=js\"\nexport * from \"./Oauth2AppType.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\workspace\\\\github\\\\databasir\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <el-container>\r\n        <el-header>\r\n        </el-header>\r\n        <el-main class=\"login-main\">\r\n            <div class=\"login-card\">\r\n                <el-form ref=\"formRef\" :rules=\"formRule\" :model=\"form\" style=\"border:none;\">\r\n                    <el-form-item>\r\n                        <el-link href=\"https://github.com/vran-dev/databasir\" target=\"_blank\" :underline=\"false\" type=\"info\">\r\n                            <h1>Databasir</h1>\r\n                        </el-link>\r\n                    </el-form-item>\r\n                    <el-form-item  prop=\"username\">\r\n                        <input type=\"text\" class=\"login-input\" placeholder=\"用户名或邮箱\" v-model=\"form.username\" @keyup.enter=\"onLogin('formRef')\">\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"password\">\r\n                        <input type=\"password\" class=\"login-input\" placeholder=\"密码\" v-model=\"form.password\" @keyup.enter=\"onLogin('formRef')\" >\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-space :size=\"32\">\r\n                            <el-button style=\"width: 120px; margin-top:10px;border-color:#EEE;\" color=\"#000\" @click=\"onLogin('formRef')\" plain round >\r\n                                登录\r\n                            </el-button>\r\n                            <el-tooltip content=\"请联系管理员为您重置密码\">\r\n                                <el-link target=\"_blank\" :underline=\"false\" type=\"info\">\r\n                                忘记密码？\r\n                                </el-link>\r\n                            </el-tooltip>\r\n                        </el-space>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-divider content-position=\"right\" v-if=\"oauthApps.length > 0\">\r\n                            <el-space :size=\"26\">\r\n                                第三方登录\r\n                                <el-link v-for=\"(item, index) in oauthApps\" :key=\"index\" :underline=\"false\" @click=\"onAuthLogin(item.registrationId)\">\r\n                                    <oauth2-app-type :app-type=\"item.appType\" :app-icon=\"item.appIcon\" :app-name=\"item.appName\"/>\r\n                                </el-link>\r\n                            </el-space>\r\n                        </el-divider>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-main>\r\n    </el-container>\r\n</template>\r\n\r\n<style>\r\n.login-main {\r\n    margin: 0 auto;\r\n    margin-top: 200px;\r\n}\r\n\r\n.login-input {\r\n    border-width: 0 0 1px 0;\r\n    border-style: solid;\r\n    border-color:#ddd;\r\n    width: 100%;\r\n    min-height: 33px;\r\n}\r\n\r\n.login-input::placeholder {\r\n    color: rgba(180, 180, 180, 0.808);\r\n}\r\n\r\n.login-input:focus {\r\n    outline: none;\r\n    border-color: #000;\r\n}\r\n\r\n.login-card {\r\n    max-width: 600px;\r\n    min-width: 500px;\r\n    border-color: black;\r\n    /* border-style: solid; */\r\n}\r\n\r\n.app-icon {\r\n    --el-avatar-bg-color: transparent;\r\n}\r\n\r\n</style>\r\n<script>\r\nimport { login } from \"../api/Login\"\r\nimport { user } from \"../utils/auth\"\r\nimport { listAll, authorizationUrl } from \"../api/OAuthApp\"\r\nimport Oauth2AppType from '../components/Oauth2AppType.vue'\r\n\r\nexport default {\r\n    components: { Oauth2AppType },\r\n    data() {\r\n        return {\r\n            form: {\r\n                username: null,\r\n                password: null\r\n            },\r\n\r\n            formRule: {\r\n                username: [{required: true,message: '请输入用户名或邮箱',trigger: 'blur'}],\r\n                password: [{required: true,message: '请输入密码',trigger: 'blur'}],\r\n            },\r\n\r\n            oauthApps: []\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchAllOAuthApps()\r\n    },\r\n\r\n    methods: {\r\n        resolveAppIcon(item) {\r\n            if (item.appIcon && item.appIcon != '') {\r\n                return item.appIcon\r\n            }\r\n            if ('github' == item.appType) {\r\n                return require('@/assets/app/github.svg')\r\n            } else if ('gitlab' == item.appType) {\r\n                return require('@/assets/app/gitlab.svg')\r\n            } else {\r\n                return ''\r\n            }\r\n        },\r\n        fetchAllOAuthApps() {\r\n            listAll().then(resp => {\r\n                if(!resp.errCode) {\r\n                    this.oauthApps = resp.data\r\n                }\r\n            })\r\n        },\r\n        toIndexPage() {\r\n            this.$router.push({path: '/groups'})\r\n        },\r\n\r\n        onAuthLogin(id) {\r\n            const protocol = window.location.protocol\r\n            const redirectUri = protocol + \"//\" + window.location.host + \"/login/oauth2/\" + id\r\n            const params = {\r\n                redirect_uri: redirectUri\r\n            }\r\n            authorizationUrl(id, params).then(resp => {\r\n                if (!resp.errCode) {\r\n                    window.location.href = resp.data\r\n                }\r\n            })\r\n        },\r\n\r\n        onLogin() {\r\n             this.$refs.formRef.validate(valid => {\r\n                 if (valid) {\r\n                    login(this.form).then(resp => {\r\n                        if (!resp.errCode) {\r\n                            user.saveUserLoginData(resp.data)\r\n                            this.$store.commit('userUpdate', {\r\n                                nickname: resp.data.nickname,\r\n                                username: resp.data.username,\r\n                                email: resp.data.email,\r\n                            })\r\n                            this.toIndexPage()\r\n                        }\r\n                    })\r\n                 }\r\n             })\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./Login.vue?vue&type=template&id=a9b1c70c\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=a9b1c70c&lang=css\"\n\nimport exportComponent from \"D:\\\\workspace\\\\github\\\\databasir\\\\databasir-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["base","listAll","axios","authorizationUrl","id","params","apiBase","pageList","pageQuery","deleteById","getById","createApp","body","updateApp","$props","toLowerCase","_createBlock","_component_el_tooltip","content","effect","_createElementVNode","src","require","style","_createElementBlock","_Fragment","key","props","appType","String","appIcon","appName","__exports__","render","class","_component_el_container","_createVNode","_component_el_header","_component_el_main","_component_el_form","ref","rules","$data","model","_component_el_form_item","_component_el_link","href","target","underline","type","_hoisted_2","prop","placeholder","username","$event","onKeyup","$options","password","_component_el_space","size","_component_el_button","color","onClick","plain","round","length","_component_el_divider","_renderList","item","index","registrationId","_component_oauth2_app_type","components","Oauth2AppType","data","form","formRule","required","message","trigger","oauthApps","created","this","fetchAllOAuthApps","methods","resolveAppIcon","then","resp","errCode","toIndexPage","$router","push","path","onAuthLogin","protocol","window","location","redirectUri","host","redirect_uri","onLogin","$refs","formRef","validate","valid","login","user","$store","commit","nickname","email"],"sourceRoot":""}